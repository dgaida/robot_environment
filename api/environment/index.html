
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A comprehensive Python framework for robotic pick-and-place operations with vision-based object detection">
      
      
      
        <link rel="canonical" href="https://dgaida.github.io/robot_environment/api/environment/">
      
      
        <link rel="prev" href="../../architecture/">
      
      
        <link rel="next" href="../robot/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Environment - Robot Environment</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#environment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Robot Environment" class="md-header__button md-logo" aria-label="Robot Environment" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Robot Environment
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Environment
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../index.md#installation" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contributing/" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Robot Environment" class="md-nav__button md-logo" aria-label="Robot Environment" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Robot Environment
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.md#installation" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Environment
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Environment
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Attributes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.verbose" class="md-nav__link">
    <span class="md-ellipsis">
      
        verbose
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.__del__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __del__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.add_object_name2object_labels" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_object_name2object_labels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      
        cleanup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.clear_memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        clear_memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.clear_workspace_memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        clear_workspace_memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.export_performance_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        export_performance_metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.framegrabber" class="md-nav__link">
    <span class="md-ellipsis">
      
        framegrabber
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_all_workspace_objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_workspace_objects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_current_frame" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_current_frame
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_current_frame_width_height" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_current_frame_width_height
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_current_workspace_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_current_workspace_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_detected_objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_detected_objects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_detected_objects_from_memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_detected_objects_from_memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_detected_objects_from_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_detected_objects_from_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_largest_free_space_with_center" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_largest_free_space_with_center
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_object_labels" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_object_labels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_object_labels_as_string" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_object_labels_as_string
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_performance_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_performance_metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_performance_stats" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_performance_stats
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_robot_controller" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_robot_controller
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_robot_in_motion" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_robot_in_motion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_robot_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_robot_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_robot_target_pose_from_rel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_robot_target_pose_from_rel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_visible_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_visible_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_workspace_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_workspace_by_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_workspace_coordinate_from_point" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_workspace_coordinate_from_point
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_workspace_home_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_workspace_home_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_workspace_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_workspace_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.is_any_workspace_visible" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_any_workspace_visible
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.oralcom_call_text2speech_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        oralcom_call_text2speech_async
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.print_performance_summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        print_performance_summary
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.remove_object_from_memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        remove_object_from_memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.remove_object_from_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        remove_object_from_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.reset_performance_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_performance_metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.robot" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.robot_move2home_observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_move2home_observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.robot_move2observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_move2observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.set_current_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_current_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.start_camera_updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        start_camera_updates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.stop_camera_updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        stop_camera_updates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.update_camera_and_objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        update_camera_and_objects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.update_object_in_memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        update_object_in_memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.update_object_in_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        update_object_in_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.use_simulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        use_simulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.workspaces" class="md-nav__link">
    <span class="md-ellipsis">
      
        workspaces
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../robot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Robot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../camera/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Camera
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TESTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Attributes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.verbose" class="md-nav__link">
    <span class="md-ellipsis">
      
        verbose
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.__del__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __del__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.add_object_name2object_labels" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_object_name2object_labels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      
        cleanup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.clear_memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        clear_memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.clear_workspace_memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        clear_workspace_memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.export_performance_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        export_performance_metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.framegrabber" class="md-nav__link">
    <span class="md-ellipsis">
      
        framegrabber
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_all_workspace_objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_all_workspace_objects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_current_frame" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_current_frame
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_current_frame_width_height" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_current_frame_width_height
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_current_workspace_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_current_workspace_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_detected_objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_detected_objects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_detected_objects_from_memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_detected_objects_from_memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_detected_objects_from_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_detected_objects_from_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_largest_free_space_with_center" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_largest_free_space_with_center
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_object_labels" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_object_labels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_object_labels_as_string" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_object_labels_as_string
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_performance_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_performance_metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_performance_stats" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_performance_stats
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_robot_controller" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_robot_controller
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_robot_in_motion" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_robot_in_motion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_robot_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_robot_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_robot_target_pose_from_rel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_robot_target_pose_from_rel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_visible_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_visible_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_workspace_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_workspace_by_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_workspace_coordinate_from_point" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_workspace_coordinate_from_point
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_workspace_home_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_workspace_home_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.get_workspace_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_workspace_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.is_any_workspace_visible" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_any_workspace_visible
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.oralcom_call_text2speech_async" class="md-nav__link">
    <span class="md-ellipsis">
      
        oralcom_call_text2speech_async
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.print_performance_summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        print_performance_summary
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.remove_object_from_memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        remove_object_from_memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.remove_object_from_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        remove_object_from_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.reset_performance_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_performance_metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.robot" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.robot_move2home_observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_move2home_observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.robot_move2observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_move2observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.set_current_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_current_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.start_camera_updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        start_camera_updates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.stop_camera_updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        stop_camera_updates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.update_camera_and_objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        update_camera_and_objects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.update_object_in_memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        update_object_in_memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.update_object_in_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        update_object_in_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.use_simulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        use_simulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.environment.Environment.workspaces" class="md-nav__link">
    <span class="md-ellipsis">
      
        workspaces
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="environment">Environment</h1>


<div class="doc doc-object doc-class">



<h2 id="robot_environment.environment.Environment" class="doc doc-heading">
            <code>robot_environment.environment.Environment</code>


</h2>


    <div class="doc doc-contents first">



        <p>Environment class for robotic pick-and-place operations.</p>
<p>Coordinates between:
- Robot control
- Vision system
- Workspace management
- Object memory tracking</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>robot_environment/environment.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Environment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Environment class for robotic pick-and-place operations.</span>

<span class="sd">    Coordinates between:</span>
<span class="sd">    - Robot control</span>
<span class="sd">    - Vision system</span>
<span class="sd">    - Workspace management</span>
<span class="sd">    - Object memory tracking</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># *** CONSTRUCTORS ***</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">el_api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">robot_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">start_camera_thread</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">enable_performance_monitoring</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">performance_log_interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">60.0</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates environment object.</span>

<span class="sd">        Args:</span>
<span class="sd">            el_api_key: ElevenLabs API Key for text-to-speech</span>
<span class="sd">            use_simulation: If True, simulate the robot, else use real robot</span>
<span class="sd">            robot_id: Robot identifier (&quot;niryo&quot; or &quot;widowx&quot;)</span>
<span class="sd">            verbose: Enable verbose logging</span>
<span class="sd">            start_camera_thread: If True, start camera update thread</span>
<span class="sd">                                Set to False for MCP server!</span>
<span class="sd">            enable_performance_monitoring: Enable performance metrics tracking</span>
<span class="sd">            performance_log_interval: Interval in seconds for performance logging</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_use_simulation</span> <span class="o">=</span> <span class="n">use_simulation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">get_package_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initializing Environment&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Configuration: simulation=</span><span class="si">{</span><span class="n">use_simulation</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;robot_id=</span><span class="si">{</span><span class="n">robot_id</span><span class="si">}</span><span class="s2">, camera_thread=</span><span class="si">{</span><span class="n">start_camera_thread</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;metrics=</span><span class="si">{</span><span class="n">enable_performance_monitoring</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Initialize performance metrics</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span> <span class="o">=</span> <span class="n">PerformanceMetrics</span><span class="p">(</span><span class="n">history_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span> <span class="k">if</span> <span class="n">enable_performance_monitoring</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PerformanceMonitor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">enable_performance_monitoring</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span> <span class="o">=</span> <span class="n">PerformanceMonitor</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">,</span> <span class="n">interval_seconds</span><span class="o">=</span><span class="n">performance_log_interval</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span>
            <span class="p">)</span>

        <span class="c1"># Initialize robot (must come before framegrabber and workspaces)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span> <span class="o">=</span> <span class="n">Robot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">robot_id</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>

        <span class="c1"># Initialize robot-specific components</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_robot_controller</span><span class="p">(),</span> <span class="n">NiryoRobotController</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_framegrabber</span> <span class="o">=</span> <span class="n">NiryoFrameGrabber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span> <span class="o">=</span> <span class="n">NiryoWorkspaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Home workspace: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_home_workspace</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_robot_controller</span><span class="p">(),</span> <span class="n">WidowXRobotController</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_framegrabber</span> <span class="o">=</span> <span class="n">WidowXFrameGrabber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span> <span class="o">=</span> <span class="n">WidowXWorkspaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown robot controller type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_robot_controller</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Initialize text-to-speech</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_oralcom</span> <span class="o">=</span> <span class="n">Text2Speech</span><span class="p">(</span>
            <span class="n">el_api_key</span><span class="p">,</span>
            <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
            <span class="n">enable_queue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Enable built-in audio queue</span>
            <span class="n">max_queue_size</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
            <span class="n">duplicate_timeout</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Thread control</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>

        <span class="c1"># Initialize ObjectMemoryManager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span> <span class="o">=</span> <span class="n">ObjectMemoryManager</span><span class="p">(</span><span class="n">manual_update_timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">position_tolerance</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>

        <span class="c1"># Initialize workspaces in memory manager</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="p">,</span> <span class="s2">&quot;__iter__&quot;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">workspace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="p">:</span>
                    <span class="n">workspace_id</span> <span class="o">=</span> <span class="n">workspace</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">initialize_workspace</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initialized memory for workspace: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not iterate workspaces: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="p">,</span> <span class="s2">&quot;get_workspace_home_id&quot;</span><span class="p">):</span>
                    <span class="n">default_ws_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_home_id</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">initialize_workspace</span><span class="p">(</span><span class="n">default_ws_id</span><span class="p">)</span>

        <span class="c1"># Current workspace tracking</span>
        <span class="c1"># self._current_workspace_id: Optional[str] = None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_home_id</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Set initial workspace to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Redis-based communication</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_object_broker</span> <span class="o">=</span> <span class="n">RedisMessageBroker</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label_manager</span> <span class="o">=</span> <span class="n">RedisLabelManager</span><span class="p">()</span>

        <span class="c1"># Start performance monitor if enabled</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Performance monitoring started&quot;</span><span class="p">)</span>

        <span class="c1"># Start camera thread if requested</span>
        <span class="k">if</span> <span class="n">start_camera_thread</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting camera update thread...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_camera_updates</span><span class="p">(</span><span class="n">visualize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Camera thread disabled (manual control)&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Destructor.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_stop_event&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Shutting down environment in destructor...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_performance_monitor&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Explicit cleanup method - call when done with the object.</span>
<span class="sd">        More reliable than relying on __del__.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_stop_event&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Shutting down environment...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_performance_monitor&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_oralcom&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_oralcom</span><span class="o">.</span><span class="n">shutdown</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>

    <span class="c1"># *** PUBLIC METHODS ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">start_camera_updates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visualize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Start the background camera update thread.</span>

<span class="sd">        Args:</span>
<span class="sd">            visualize: If True, show the camera feed (requires GUI).</span>

<span class="sd">        Returns:</span>
<span class="sd">            The started threading.Thread object.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">loop</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_camera_and_objects</span><span class="p">(</span><span class="n">visualize</span><span class="o">=</span><span class="n">visualize</span><span class="p">):</span>
                <span class="k">pass</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">loop</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">t</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_camera_and_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visualize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Continuously updates the camera and detected objects.</span>

<span class="sd">        Args:</span>
<span class="sd">            visualize: If True, displays the updated camera feed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># FIX: Get home workspace ID and set it as current</span>
        <span class="n">home_workspace_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_home_id</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="n">home_workspace_id</span>  <span class="c1"># Set before moving</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">robot_move2observation_pose</span><span class="p">(</span><span class="n">home_workspace_id</span><span class="p">)</span>

        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="n">loop_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>

            <span class="c1"># Get current frame with timing</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;frame_capture&quot;</span><span class="p">):</span>
                    <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_frame</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_frame</span><span class="p">()</span>

            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

            <span class="c1"># Get detected objects from Redis</span>
            <span class="c1"># Get detected objects from Redis with timing</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;object_fetch_redis&quot;</span><span class="p">):</span>
                    <span class="n">detected_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_detected_objects</span><span class="p">()</span>

                <span class="c1"># Record object count</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">increment_counter</span><span class="p">(</span><span class="s2">&quot;objects_detected&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">detected_objects</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">detected_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_detected_objects</span><span class="p">()</span>

            <span class="c1"># Update memory using ObjectMemoryManager</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">:</span>  <span class="c1"># This should now always be True</span>
                <span class="n">at_observation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_any_workspace_visible</span><span class="p">()</span>
                <span class="n">robot_moving</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_robot_in_motion</span><span class="p">()</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
                    <span class="n">mem_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>

                <span class="n">objects_added</span><span class="p">,</span> <span class="n">objects_updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                    <span class="n">workspace_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">,</span>
                    <span class="n">detected_objects</span><span class="o">=</span><span class="n">detected_objects</span><span class="p">,</span>
                    <span class="n">at_observation_pose</span><span class="o">=</span><span class="n">at_observation</span><span class="p">,</span>
                    <span class="n">robot_in_motion</span><span class="o">=</span><span class="n">robot_moving</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
                    <span class="n">mem_duration</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">mem_start</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">record_memory_update</span><span class="p">(</span><span class="n">mem_duration</span><span class="p">,</span> <span class="n">objects_added</span><span class="p">,</span> <span class="n">objects_updated</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Memory update for &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="si">}</span><span class="s2">&#39;: &quot;</span> <span class="sa">f</span><span class="s2">&quot;added=</span><span class="si">{</span><span class="n">objects_added</span><span class="si">}</span><span class="s2">, updated=</span><span class="si">{</span><span class="n">objects_updated</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># This should never happen now, but log it if it does</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Current workspace ID is None - memory not updated!&quot;</span><span class="p">)</span>

            <span class="c1"># Record loop iteration time</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
                <span class="n">loop_duration</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">loop_start</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">record_timing</span><span class="p">(</span><span class="s2">&quot;camera_loop_iteration&quot;</span><span class="p">,</span> <span class="n">loop_duration</span><span class="p">)</span>

            <span class="c1"># Log memory stats</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span><span class="p">:</span>
                <span class="n">stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">get_memory_stats</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">:</span>
                    <span class="n">ws_stats</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Memory: </span><span class="si">{</span><span class="n">ws_stats</span><span class="p">[</span><span class="s1">&#39;object_count&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> objects, &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;manual_updates=</span><span class="si">{</span><span class="n">ws_stats</span><span class="p">[</span><span class="s1">&#39;manual_updates&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;visible=</span><span class="si">{</span><span class="n">ws_stats</span><span class="p">[</span><span class="s1">&#39;visible&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

            <span class="k">yield</span> <span class="n">img</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_robot_in_motion</span><span class="p">():</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Manually clear all objects from memory.</span>
<span class="sd">        Useful when workspace has changed significantly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Clearing memory of all objects&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;memory_clear&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">increment_counter</span><span class="p">(</span><span class="s2">&quot;memory_clears&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_detected_objects_from_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Objects</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a copy of the object memory for current workspace.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Objects: Copy of objects currently in memory</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;memory_get&quot;</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_memory_internal</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_memory_internal</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_memory_internal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Objects</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal method for getting memory.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">)</span>

        <span class="n">home_ws_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_home_id</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">home_ws_id</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">remove_object_from_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove an object from memory after manipulation.</span>

<span class="sd">        Args:</span>
<span class="sd">            object_label: Label of the object to remove</span>
<span class="sd">            coordinate: Last known coordinate [x, y]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No current workspace set&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">remove_object</span><span class="p">(</span>
            <span class="n">workspace_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">,</span> <span class="n">object_label</span><span class="o">=</span><span class="n">object_label</span><span class="p">,</span> <span class="n">coordinate</span><span class="o">=</span><span class="n">coordinate</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_object_in_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">old_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">new_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update an object&#39;s position in memory after movement.</span>

<span class="sd">        Args:</span>
<span class="sd">            object_label: Label of the object</span>
<span class="sd">            old_coordinate: Previous coordinate [x, y]</span>
<span class="sd">            new_pose: New pose after movement</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No current workspace set&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">mark_manual_update</span><span class="p">(</span>
            <span class="n">workspace_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">,</span>
            <span class="n">object_label</span><span class="o">=</span><span class="n">object_label</span><span class="p">,</span>
            <span class="n">old_coordinate</span><span class="o">=</span><span class="n">old_coordinate</span><span class="p">,</span>
            <span class="n">new_pose</span><span class="o">=</span><span class="n">new_pose</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Performance metrics methods</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_performance_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PerformanceMetrics</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the performance metrics tracker.</span>

<span class="sd">        Returns:</span>
<span class="sd">            PerformanceMetrics instance or None if disabled</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_performance_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current performance statistics.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dictionary with performance stats or None if disabled</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">get_stats</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">print_performance_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Print a human-readable performance summary.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">get_summary</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Performance monitoring is disabled&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">export_performance_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Export performance metrics to JSON file.</span>

<span class="sd">        Args:</span>
<span class="sd">            filepath: Path to output file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">export_json</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Performance metrics exported to </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Performance monitoring is disabled&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset_performance_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset all performance metrics.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Performance metrics reset&quot;</span><span class="p">)</span>

    <span class="c1"># Multi-workspace memory methods</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_current_workspace_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the ID of the currently observed workspace.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_current_workspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the current workspace being observed.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="n">workspace_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current workspace set to: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_detected_objects_from_workspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Objects</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get objects from a specific workspace memory.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: ID of the workspace</span>

<span class="sd">        Returns:</span>
<span class="sd">            Objects: Copy of objects in that workspace&#39;s memory</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_workspace_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Objects</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get objects from all workspaces.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict mapping workspace_id to Objects collection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">get_all</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear_workspace_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear memory for a specific workspace.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">remove_object_from_workspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">object_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">coordinate</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove an object from a specific workspace&#39;s memory.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">remove_object</span><span class="p">(</span><span class="n">workspace_id</span><span class="o">=</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">object_label</span><span class="o">=</span><span class="n">object_label</span><span class="p">,</span> <span class="n">coordinate</span><span class="o">=</span><span class="n">coordinate</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_object_in_workspace</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">source_workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target_workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">object_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">old_coordinate</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">new_coordinate</span><span class="p">:</span> <span class="nb">list</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move an object from one workspace to another in memory.</span>

<span class="sd">        Args:</span>
<span class="sd">            source_workspace_id: ID of workspace where object currently is</span>
<span class="sd">            target_workspace_id: ID of workspace where object will be placed</span>
<span class="sd">            object_label: Label of the object</span>
<span class="sd">            old_coordinate: Current coordinate in source workspace</span>
<span class="sd">            new_coordinate: New coordinate in target workspace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">move_object</span><span class="p">(</span>
            <span class="n">source_workspace_id</span><span class="o">=</span><span class="n">source_workspace_id</span><span class="p">,</span>
            <span class="n">target_workspace_id</span><span class="o">=</span><span class="n">target_workspace_id</span><span class="p">,</span>
            <span class="n">object_label</span><span class="o">=</span><span class="n">object_label</span><span class="p">,</span>
            <span class="n">old_coordinate</span><span class="o">=</span><span class="n">old_coordinate</span><span class="p">,</span>
            <span class="n">new_coordinate</span><span class="o">=</span><span class="n">new_coordinate</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># *** PUBLIC SET METHODS ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_object_name2object_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a new object to the list of recognizable objects via Redis.</span>

<span class="sd">        Args:</span>
<span class="sd">            object_name: Name of the object to add</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Status message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Add label to Redis stream</span>
        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_label_manager</span><span class="o">.</span><span class="n">add_label</span><span class="p">(</span><span class="n">object_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
            <span class="n">mymessage</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Added </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> to the list of recognizable objects.&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mymessage</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> is already in the list of recognizable objects.&quot;</span>

        <span class="c1"># Provide audio feedback</span>
        <span class="n">thread_oral</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oralcom</span><span class="o">.</span><span class="n">call_text2speech_async</span><span class="p">(</span><span class="n">mymessage</span><span class="p">)</span>
        <span class="n">thread_oral</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">mymessage</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">stop_camera_updates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop camera update thread.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">oralcom_call_text2speech_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Asynchronously call text-to-speech API.</span>

<span class="sd">        Args:</span>
<span class="sd">            text: Message for text-to-speech</span>
<span class="sd">            priority: Priority (0-10, higher = more urgent)</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if queued successfully (or dummy thread for compatibility)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oralcom</span><span class="o">.</span><span class="n">speak</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="n">priority</span><span class="p">,</span> <span class="n">blocking</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># *** PUBLIC GET METHODS ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_largest_free_space_with_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines the largest free space in the workspace in square metres and its center coordinate in metres.</span>
<span class="sd">        This method can be used to determine at which location an object can be placed safely.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: Optional ID of the workspace to analyze. If None, the home workspace is used.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: (largest_free_area_m2, center_x, center_y) where:</span>
<span class="sd">                - largest_area_m2 (float): Largest free area in square meters.</span>
<span class="sd">                - center_x (float): X-coordinate of the center of the largest free area in meters.</span>
<span class="sd">                - center_y (float): Y-coordinate of the center of the largest free area in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">workspace_id</span><span class="p">:</span>
            <span class="n">workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Workspace not found: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>

        <span class="n">detected_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_detected_objects</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">calculate_largest_free_space</span><span class="p">(</span>
            <span class="n">workspace</span><span class="o">=</span><span class="n">workspace</span><span class="p">,</span> <span class="n">detected_objects</span><span class="o">=</span><span class="n">detected_objects</span><span class="p">,</span> <span class="n">visualize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_logger</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_workspace_coordinate_from_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the world coordinate of a special point of the given workspace.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id (str): ID of workspace.</span>
<span class="sd">            point (str): description of point. Possible values are:</span>
<span class="sd">            - &#39;upper left corner&#39;: Returns the world coordinate of the upper left corner of the workspace.</span>
<span class="sd">            - &#39;upper right corner&#39;: Returns the world coordinate of the upper right corner of the workspace.</span>
<span class="sd">            - &#39;lower left corner&#39;: Returns the world coordinate of the lower left corner of the workspace.</span>
<span class="sd">            - &#39;lower right corner&#39;: Returns the world coordinate of the lower right corner of the workspace.</span>
<span class="sd">            - &#39;center point&#39;: Returns the world coordinate of the center of the workspace.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[float]: (x,y) world coordinate of the point on the workspace that was specified by the argument point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">point</span> <span class="o">==</span> <span class="s2">&quot;upper left corner&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span><span class="o">.</span><span class="n">xy_ul_wc</span><span class="p">()</span><span class="o">.</span><span class="n">xy_coordinate</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">point</span> <span class="o">==</span> <span class="s2">&quot;upper right corner&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span><span class="o">.</span><span class="n">xy_ur_wc</span><span class="p">()</span><span class="o">.</span><span class="n">xy_coordinate</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">point</span> <span class="o">==</span> <span class="s2">&quot;lower left corner&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span><span class="o">.</span><span class="n">xy_ll_wc</span><span class="p">()</span><span class="o">.</span><span class="n">xy_coordinate</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">point</span> <span class="o">==</span> <span class="s2">&quot;lower right corner&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span><span class="o">.</span><span class="n">xy_lr_wc</span><span class="p">()</span><span class="o">.</span><span class="n">xy_coordinate</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">point</span> <span class="o">==</span> <span class="s2">&quot;center point&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span><span class="o">.</span><span class="n">xy_center_wc</span><span class="p">()</span><span class="o">.</span><span class="n">xy_coordinate</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown point type: </span><span class="si">{</span><span class="n">point</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># GET methods from Workspaces</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_workspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Workspace</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the workspace at the given position index in the list of workspaces.</span>

<span class="sd">        Args:</span>
<span class="sd">            index: 0-based index in the list of workspaces.</span>

<span class="sd">        Returns:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_workspace_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Workspace</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the Workspace object with the given id, if existent, else None is returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            id: workspace ID</span>

<span class="sd">        Returns:</span>
<span class="sd">            Workspace or None, if no workspace with the given id exists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_workspace_home_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the ID of the workspace at index 0.</span>

<span class="sd">        Returns:</span>
<span class="sd">            the ID of the workspace at index 0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_home_id</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_workspace_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the id of the workspace at the given position index in the list of workspaces.</span>

<span class="sd">        Args:</span>
<span class="sd">            index: 0-based index in the list of workspaces.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: id of the workspace at the given position index in the list of workspaces.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_id</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_visible_workspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">camera_pose</span><span class="p">:</span> <span class="n">PoseObjectPNP</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Workspace</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get visible workspace from camera pose.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_visible_workspace</span><span class="p">(</span><span class="n">camera_pose</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_any_workspace_visible</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if any workspace is currently visible.&quot;&quot;&quot;</span>
        <span class="n">pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_robot_pose</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible_workspace</span><span class="p">(</span><span class="n">pose</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the observation pose of the given workspace id</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: id of the workspace</span>

<span class="sd">        Returns:</span>
<span class="sd">            PoseObjectPNP: observation pose of the gripper where it can observe the workspace given by workspace_id</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

    <span class="c1"># Camera-related GET methods</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_current_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Capture image from robot&#39;s camera.</span>

<span class="sd">        Returns:</span>
<span class="sd">            numpy.ndarray: Camera image</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_framegrabber</span><span class="o">.</span><span class="n">get_current_frame</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span> <span class="ow">and</span> <span class="n">frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">increment_counter</span><span class="p">(</span><span class="s2">&quot;frames_captured&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">frame</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_current_frame_width_height</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns width and height of current frame in pixels.</span>

<span class="sd">        Returns:</span>
<span class="sd">            width and height of current frame in pixels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_framegrabber</span><span class="o">.</span><span class="n">get_current_frame_width_height</span><span class="p">()</span>

    <span class="c1"># Robot-related GET methods</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_robot_controller</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RobotController</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            RobotController: object that controls the robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot</span><span class="p">()</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_robot_in_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if robot is in motion.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if robot is moving, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_in_motion</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_robot_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current pose of gripper of robot.</span>

<span class="sd">        Returns:</span>
<span class="sd">            current pose of gripper of robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;robot_get_pose&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_robot_target_pose_from_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">yaw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),</span>
<span class="sd">        calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the</span>
<span class="sd">        given coordinate an object that has the given orientation. For this method to work, it is important that</span>
<span class="sd">        only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot</span>
<span class="sd">        this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: id of the workspace</span>
<span class="sd">            u_rel: horizontal coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">            v_rel: vertical coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">            yaw: orientation of an object at the pixel coordinates [u_rel, v_rel].</span>

<span class="sd">        Returns:</span>
<span class="sd">            PoseObjectPNP: Pose in world coordinates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span>

    <span class="c1"># Vision-related GET methods</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_object_labels_as_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return detectable object labels as comma-separated string.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Comma-separated list of objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">object_labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_labels</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">object_labels</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">object_labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="s2">&quot;No detectable objects configured.&quot;</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;I can recognize these objects: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">object_labels</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_detected_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Objects</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get detected objects from Redis stream.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Objects: Collection of detected objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get latest objects from Redis (published by vision_detect_segment)</span>
        <span class="n">objects_dict_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_broker</span><span class="o">.</span><span class="n">get_latest_objects</span><span class="p">(</span><span class="n">max_age_seconds</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">objects_dict_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No fresh object detections from Redis&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Objects</span><span class="p">()</span>

        <span class="c1"># Convert dictionaries to Object instances</span>
        <span class="k">return</span> <span class="n">Objects</span><span class="o">.</span><span class="n">dict_list_to_objects</span><span class="p">(</span><span class="n">objects_dict_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_object_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get list of detectable object labels from Redis.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of lists of detectable strings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get latest labels from Redis (published by vision_detect_segment)</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_label_manager</span><span class="o">.</span><span class="n">get_latest_labels</span><span class="p">(</span><span class="n">timeout_seconds</span><span class="o">=</span><span class="mf">60.0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No labels from Redis, using empty list&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[[]]</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">labels</span><span class="p">]</span>

    <span class="c1"># Robot control methods</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">robot_move2home_observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Move robot to home workspace observation pose.&quot;&quot;&quot;</span>
        <span class="n">workspace_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_home_id</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">robot_move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">robot_move2observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move robot to observation pose for given workspace.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: ID of workspace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;robot_move_observation&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="n">workspace_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Set current workspace to: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># *** PUBLIC STATIC/CLASS GET methods ***</span>

    <span class="c1"># *** PRIVATE methods ***</span>

    <span class="c1"># *** PUBLIC properties ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">workspaces</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Workspaces</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return workspaces object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">framegrabber</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrameGrabber</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return framegrabber object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_framegrabber</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">robot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Robot</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return robot object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">use_simulation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if using simulation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_use_simulation</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PerformanceMetrics</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get performance metrics tracker.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if verbose logging enabled.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">isEnabledFor</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

    <span class="nd">@verbose</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set verbose logging on/off.&quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">.common.logger_config</span><span class="w"> </span><span class="kn">import</span> <span class="n">set_verbose</span>

        <span class="n">set_verbose</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="c1"># *** PRIVATE VARIABLES ***</span>

    <span class="c1"># Workspaces object</span>
    <span class="n">_workspaces</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># FrameGraber object</span>
    <span class="n">_framegrabber</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Robot object</span>
    <span class="n">_robot</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_use_simulation</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_verbose</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_memory_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ObjectMemoryManager</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_current_workspace_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">





<h3 id="robot_environment.environment.Environment-attributes">Attributes</h3>

<div class="doc doc-object doc-attribute">



<h4 id="robot_environment.environment.Environment.verbose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verbose</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Check if verbose logging enabled.</p>

    </div>

</div>


<h3 id="robot_environment.environment.Environment-functions">Functions</h3>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.__del__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__del__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Destructor.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Destructor.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_stop_event&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Shutting down environment in destructor...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_performance_monitor&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">el_api_key</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">robot_id</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">start_camera_thread</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">enable_performance_monitoring</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">performance_log_interval</span><span class="o">=</span><span class="mf">60.0</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Creates environment object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>el_api_key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ElevenLabs API Key for text-to-speech</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>use_simulation</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, simulate the robot, else use real robot</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>robot_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Robot identifier ("niryo" or "widowx")</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Enable verbose logging</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>start_camera_thread</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, start camera update thread
                Set to False for MCP server!</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>enable_performance_monitoring</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Enable performance metrics tracking</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>performance_log_interval</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Interval in seconds for performance logging</p>
              </div>
            </td>
            <td>
                  <code>60.0</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">el_api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">robot_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">start_camera_thread</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">enable_performance_monitoring</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">performance_log_interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">60.0</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates environment object.</span>

<span class="sd">    Args:</span>
<span class="sd">        el_api_key: ElevenLabs API Key for text-to-speech</span>
<span class="sd">        use_simulation: If True, simulate the robot, else use real robot</span>
<span class="sd">        robot_id: Robot identifier (&quot;niryo&quot; or &quot;widowx&quot;)</span>
<span class="sd">        verbose: Enable verbose logging</span>
<span class="sd">        start_camera_thread: If True, start camera update thread</span>
<span class="sd">                            Set to False for MCP server!</span>
<span class="sd">        enable_performance_monitoring: Enable performance metrics tracking</span>
<span class="sd">        performance_log_interval: Interval in seconds for performance logging</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_use_simulation</span> <span class="o">=</span> <span class="n">use_simulation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span> <span class="o">=</span> <span class="n">verbose</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">get_package_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initializing Environment&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Configuration: simulation=</span><span class="si">{</span><span class="n">use_simulation</span><span class="si">}</span><span class="s2">, &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;robot_id=</span><span class="si">{</span><span class="n">robot_id</span><span class="si">}</span><span class="s2">, camera_thread=</span><span class="si">{</span><span class="n">start_camera_thread</span><span class="si">}</span><span class="s2">, &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;metrics=</span><span class="si">{</span><span class="n">enable_performance_monitoring</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Initialize performance metrics</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span> <span class="o">=</span> <span class="n">PerformanceMetrics</span><span class="p">(</span><span class="n">history_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span> <span class="k">if</span> <span class="n">enable_performance_monitoring</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PerformanceMonitor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">enable_performance_monitoring</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span> <span class="o">=</span> <span class="n">PerformanceMonitor</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">,</span> <span class="n">interval_seconds</span><span class="o">=</span><span class="n">performance_log_interval</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span>
        <span class="p">)</span>

    <span class="c1"># Initialize robot (must come before framegrabber and workspaces)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span> <span class="o">=</span> <span class="n">Robot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">robot_id</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>

    <span class="c1"># Initialize robot-specific components</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_robot_controller</span><span class="p">(),</span> <span class="n">NiryoRobotController</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_framegrabber</span> <span class="o">=</span> <span class="n">NiryoFrameGrabber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span> <span class="o">=</span> <span class="n">NiryoWorkspaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Home workspace: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_home_workspace</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_robot_controller</span><span class="p">(),</span> <span class="n">WidowXRobotController</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_framegrabber</span> <span class="o">=</span> <span class="n">WidowXFrameGrabber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span> <span class="o">=</span> <span class="n">WidowXWorkspaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown robot controller type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_robot_controller</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Initialize text-to-speech</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_oralcom</span> <span class="o">=</span> <span class="n">Text2Speech</span><span class="p">(</span>
        <span class="n">el_api_key</span><span class="p">,</span>
        <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
        <span class="n">enable_queue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Enable built-in audio queue</span>
        <span class="n">max_queue_size</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">duplicate_timeout</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Thread control</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>

    <span class="c1"># Initialize ObjectMemoryManager</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span> <span class="o">=</span> <span class="n">ObjectMemoryManager</span><span class="p">(</span><span class="n">manual_update_timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">position_tolerance</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>

    <span class="c1"># Initialize workspaces in memory manager</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="p">,</span> <span class="s2">&quot;__iter__&quot;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">workspace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="p">:</span>
                <span class="n">workspace_id</span> <span class="o">=</span> <span class="n">workspace</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">initialize_workspace</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initialized memory for workspace: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not iterate workspaces: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="p">,</span> <span class="s2">&quot;get_workspace_home_id&quot;</span><span class="p">):</span>
                <span class="n">default_ws_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_home_id</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">initialize_workspace</span><span class="p">(</span><span class="n">default_ws_id</span><span class="p">)</span>

    <span class="c1"># Current workspace tracking</span>
    <span class="c1"># self._current_workspace_id: Optional[str] = None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_home_id</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Set initial workspace to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Redis-based communication</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_object_broker</span> <span class="o">=</span> <span class="n">RedisMessageBroker</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_label_manager</span> <span class="o">=</span> <span class="n">RedisLabelManager</span><span class="p">()</span>

    <span class="c1"># Start performance monitor if enabled</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Performance monitoring started&quot;</span><span class="p">)</span>

    <span class="c1"># Start camera thread if requested</span>
    <span class="k">if</span> <span class="n">start_camera_thread</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting camera update thread...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_camera_updates</span><span class="p">(</span><span class="n">visualize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Camera thread disabled (manual control)&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.add_object_name2object_labels" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_object_name2object_labels</span><span class="p">(</span><span class="n">object_name</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Add a new object to the list of recognizable objects via Redis.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>object_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the object to add</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Status message</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_object_name2object_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a new object to the list of recognizable objects via Redis.</span>

<span class="sd">    Args:</span>
<span class="sd">        object_name: Name of the object to add</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Status message</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Add label to Redis stream</span>
    <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_label_manager</span><span class="o">.</span><span class="n">add_label</span><span class="p">(</span><span class="n">object_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
        <span class="n">mymessage</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Added </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> to the list of recognizable objects.&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mymessage</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> is already in the list of recognizable objects.&quot;</span>

    <span class="c1"># Provide audio feedback</span>
    <span class="n">thread_oral</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oralcom</span><span class="o">.</span><span class="n">call_text2speech_async</span><span class="p">(</span><span class="n">mymessage</span><span class="p">)</span>
    <span class="n">thread_oral</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">mymessage</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.cleanup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cleanup</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Explicit cleanup method - call when done with the object.
More reliable than relying on <strong>del</strong>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Explicit cleanup method - call when done with the object.</span>
<span class="sd">    More reliable than relying on __del__.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_stop_event&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Shutting down environment...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_performance_monitor&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_performance_monitor</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_oralcom&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_oralcom</span><span class="o">.</span><span class="n">shutdown</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.clear_memory" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clear_memory</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Manually clear all objects from memory.
Useful when workspace has changed significantly.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manually clear all objects from memory.</span>
<span class="sd">    Useful when workspace has changed significantly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Clearing memory of all objects&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;memory_clear&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">increment_counter</span><span class="p">(</span><span class="s2">&quot;memory_clears&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.clear_workspace_memory" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clear_workspace_memory</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Clear memory for a specific workspace.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear_workspace_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear memory for a specific workspace.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.export_performance_metrics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">export_performance_metrics</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Export performance metrics to JSON file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filepath</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to output file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">export_performance_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Export performance metrics to JSON file.</span>

<span class="sd">    Args:</span>
<span class="sd">        filepath: Path to output file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">export_json</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Performance metrics exported to </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Performance monitoring is disabled&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.framegrabber" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">framegrabber</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return framegrabber object.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">framegrabber</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrameGrabber</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return framegrabber object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_framegrabber</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_all_workspace_objects" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_all_workspace_objects</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get objects from all workspaces.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="robot_workspace.Objects">Objects</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict mapping workspace_id to Objects collection</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_all_workspace_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Objects</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get objects from all workspaces.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict mapping workspace_id to Objects collection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">get_all</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_current_frame" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_current_frame</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Capture image from robot's camera.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>numpy.ndarray: Camera image</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_current_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Capture image from robot&#39;s camera.</span>

<span class="sd">    Returns:</span>
<span class="sd">        numpy.ndarray: Camera image</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_framegrabber</span><span class="o">.</span><span class="n">get_current_frame</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span> <span class="ow">and</span> <span class="n">frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">increment_counter</span><span class="p">(</span><span class="s2">&quot;frames_captured&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">frame</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_current_frame_width_height" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_current_frame_width_height</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Returns width and height of current frame in pixels.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="int">int</span>, <span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>width and height of current frame in pixels.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_current_frame_width_height</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns width and height of current frame in pixels.</span>

<span class="sd">    Returns:</span>
<span class="sd">        width and height of current frame in pixels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_framegrabber</span><span class="o">.</span><span class="n">get_current_frame_width_height</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_current_workspace_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_current_workspace_id</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get the ID of the currently observed workspace.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_current_workspace_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the ID of the currently observed workspace.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_detected_objects" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_detected_objects</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get detected objects from Redis stream.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Objects</code></td>            <td>
                  <code><span title="robot_workspace.Objects">Objects</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Collection of detected objects</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_detected_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Objects</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get detected objects from Redis stream.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Objects: Collection of detected objects</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get latest objects from Redis (published by vision_detect_segment)</span>
    <span class="n">objects_dict_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_broker</span><span class="o">.</span><span class="n">get_latest_objects</span><span class="p">(</span><span class="n">max_age_seconds</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">objects_dict_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No fresh object detections from Redis&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Objects</span><span class="p">()</span>

    <span class="c1"># Convert dictionaries to Object instances</span>
    <span class="k">return</span> <span class="n">Objects</span><span class="o">.</span><span class="n">dict_list_to_objects</span><span class="p">(</span><span class="n">objects_dict_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_detected_objects_from_memory" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_detected_objects_from_memory</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get a copy of the object memory for current workspace.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Objects</code></td>            <td>
                  <code><span title="robot_workspace.Objects">Objects</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Copy of objects currently in memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_detected_objects_from_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Objects</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a copy of the object memory for current workspace.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Objects: Copy of objects currently in memory</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;memory_get&quot;</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_memory_internal</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_memory_internal</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_detected_objects_from_workspace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_detected_objects_from_workspace</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get objects from a specific workspace memory.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Objects</code></td>            <td>
                  <code><span title="robot_workspace.Objects">Objects</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Copy of objects in that workspace's memory</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_detected_objects_from_workspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Objects</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get objects from a specific workspace memory.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: ID of the workspace</span>

<span class="sd">    Returns:</span>
<span class="sd">        Objects: Copy of objects in that workspace&#39;s memory</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_largest_free_space_with_center" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_largest_free_space_with_center</span><span class="p">(</span><span class="n">workspace_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Determines the largest free space in the workspace in square metres and its center coordinate in metres.
This method can be used to determine at which location an object can be placed safely.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional ID of the workspace to analyze. If None, the home workspace is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>tuple</code></td>            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(largest_free_area_m2, center_x, center_y) where:
- largest_area_m2 (float): Largest free area in square meters.
- center_x (float): X-coordinate of the center of the largest free area in meters.
- center_y (float): Y-coordinate of the center of the largest free area in meters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_largest_free_space_with_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determines the largest free space in the workspace in square metres and its center coordinate in metres.</span>
<span class="sd">    This method can be used to determine at which location an object can be placed safely.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: Optional ID of the workspace to analyze. If None, the home workspace is used.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: (largest_free_area_m2, center_x, center_y) where:</span>
<span class="sd">            - largest_area_m2 (float): Largest free area in square meters.</span>
<span class="sd">            - center_x (float): X-coordinate of the center of the largest free area in meters.</span>
<span class="sd">            - center_y (float): Y-coordinate of the center of the largest free area in meters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">workspace_id</span><span class="p">:</span>
        <span class="n">workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Workspace not found: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>

    <span class="n">detected_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_detected_objects</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">calculate_largest_free_space</span><span class="p">(</span>
        <span class="n">workspace</span><span class="o">=</span><span class="n">workspace</span><span class="p">,</span> <span class="n">detected_objects</span><span class="o">=</span><span class="n">detected_objects</span><span class="p">,</span> <span class="n">visualize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_logger</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_object_labels" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_object_labels</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get list of detectable object labels from Redis.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of lists of detectable strings</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_object_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get list of detectable object labels from Redis.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of lists of detectable strings</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get latest labels from Redis (published by vision_detect_segment)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_label_manager</span><span class="o">.</span><span class="n">get_latest_labels</span><span class="p">(</span><span class="n">timeout_seconds</span><span class="o">=</span><span class="mf">60.0</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No labels from Redis, using empty list&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[[]]</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">labels</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_object_labels_as_string" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_object_labels_as_string</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return detectable object labels as comma-separated string.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Comma-separated list of objects</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_object_labels_as_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return detectable object labels as comma-separated string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Comma-separated list of objects</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">object_labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_labels</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">object_labels</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">object_labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s2">&quot;No detectable objects configured.&quot;</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;I can recognize these objects: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">object_labels</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_observation_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return the observation pose of the given workspace id</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>PoseObjectPNP</code></td>            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>observation pose of the gripper where it can observe the workspace given by workspace_id</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the observation pose of the given workspace id</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: id of the workspace</span>

<span class="sd">    Returns:</span>
<span class="sd">        PoseObjectPNP: observation pose of the gripper where it can observe the workspace given by workspace_id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_performance_metrics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_performance_metrics</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get the performance metrics tracker.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="robot_environment.performance_metrics.PerformanceMetrics" href="../utils/#robot_environment.performance_metrics.PerformanceMetrics">PerformanceMetrics</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>PerformanceMetrics instance or None if disabled</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_performance_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PerformanceMetrics</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the performance metrics tracker.</span>

<span class="sd">    Returns:</span>
<span class="sd">        PerformanceMetrics instance or None if disabled</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_performance_stats" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_performance_stats</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get current performance statistics.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary with performance stats or None if disabled</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_performance_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get current performance statistics.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary with performance stats or None if disabled</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">get_stats</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_robot_controller" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_robot_controller</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>RobotController</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="robot_environment.robot.robot_controller.RobotController" href="../robot/#robot_environment.robot.robot_controller.RobotController">RobotController</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>object that controls the robot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_robot_controller</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RobotController</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        RobotController: object that controls the robot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_robot_in_motion" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_robot_in_motion</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Check if robot is in motion.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if robot is moving, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_robot_in_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if robot is in motion.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if robot is moving, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_in_motion</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_robot_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_robot_pose</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get current pose of gripper of robot.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>current pose of gripper of robot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_robot_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get current pose of gripper of robot.</span>

<span class="sd">    Returns:</span>
<span class="sd">        current pose of gripper of robot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;robot_get_pose&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_robot_target_pose_from_rel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_robot_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),
calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the
given coordinate an object that has the given orientation. For this method to work, it is important that
only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot
this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>u_rel</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>horizontal coordinate in image of workspace, normalized between 0 and 1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>v_rel</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>vertical coordinate in image of workspace, normalized between 0 and 1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>yaw</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>orientation of an object at the pixel coordinates [u_rel, v_rel].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>PoseObjectPNP</code></td>            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pose in world coordinates</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_robot_target_pose_from_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">yaw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),</span>
<span class="sd">    calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the</span>
<span class="sd">    given coordinate an object that has the given orientation. For this method to work, it is important that</span>
<span class="sd">    only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot</span>
<span class="sd">    this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: id of the workspace</span>
<span class="sd">        u_rel: horizontal coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">        v_rel: vertical coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">        yaw: orientation of an object at the pixel coordinates [u_rel, v_rel].</span>

<span class="sd">    Returns:</span>
<span class="sd">        PoseObjectPNP: Pose in world coordinates</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_visible_workspace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_visible_workspace</span><span class="p">(</span><span class="n">camera_pose</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get visible workspace from camera pose.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_visible_workspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">camera_pose</span><span class="p">:</span> <span class="n">PoseObjectPNP</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Workspace</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get visible workspace from camera pose.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_visible_workspace</span><span class="p">(</span><span class="n">camera_pose</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_workspace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_workspace</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return the workspace at the given position index in the list of workspaces.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>index</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>0-based index in the list of workspaces.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns:</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_workspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Workspace</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the workspace at the given position index in the list of workspaces.</span>

<span class="sd">    Args:</span>
<span class="sd">        index: 0-based index in the list of workspaces.</span>

<span class="sd">    Returns:</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_workspace_by_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return the Workspace object with the given id, if existent, else None is returned.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>workspace ID</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="robot_workspace.Workspace">Workspace</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Workspace or None, if no workspace with the given id exists.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_workspace_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Workspace</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the Workspace object with the given id, if existent, else None is returned.</span>

<span class="sd">    Args:</span>
<span class="sd">        id: workspace ID</span>

<span class="sd">    Returns:</span>
<span class="sd">        Workspace or None, if no workspace with the given id exists.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_workspace_coordinate_from_point" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_workspace_coordinate_from_point</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get the world coordinate of a special point of the given workspace.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of workspace.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>point</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>description of point. Possible values are:</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>- &#39;upper left corner&#39;</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Returns the world coordinate of the upper left corner of the workspace.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>- &#39;upper right corner&#39;</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Returns the world coordinate of the upper right corner of the workspace.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>- &#39;lower left corner&#39;</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Returns the world coordinate of the lower left corner of the workspace.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>- &#39;lower right corner&#39;</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Returns the world coordinate of the lower right corner of the workspace.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>- &#39;center point&#39;</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Returns the world coordinate of the center of the workspace.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[float]: (x,y) world coordinate of the point on the workspace that was specified by the argument point.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_workspace_coordinate_from_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the world coordinate of a special point of the given workspace.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id (str): ID of workspace.</span>
<span class="sd">        point (str): description of point. Possible values are:</span>
<span class="sd">        - &#39;upper left corner&#39;: Returns the world coordinate of the upper left corner of the workspace.</span>
<span class="sd">        - &#39;upper right corner&#39;: Returns the world coordinate of the upper right corner of the workspace.</span>
<span class="sd">        - &#39;lower left corner&#39;: Returns the world coordinate of the lower left corner of the workspace.</span>
<span class="sd">        - &#39;lower right corner&#39;: Returns the world coordinate of the lower right corner of the workspace.</span>
<span class="sd">        - &#39;center point&#39;: Returns the world coordinate of the center of the workspace.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[float]: (x,y) world coordinate of the point on the workspace that was specified by the argument point.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">point</span> <span class="o">==</span> <span class="s2">&quot;upper left corner&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span><span class="o">.</span><span class="n">xy_ul_wc</span><span class="p">()</span><span class="o">.</span><span class="n">xy_coordinate</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">point</span> <span class="o">==</span> <span class="s2">&quot;upper right corner&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span><span class="o">.</span><span class="n">xy_ur_wc</span><span class="p">()</span><span class="o">.</span><span class="n">xy_coordinate</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">point</span> <span class="o">==</span> <span class="s2">&quot;lower left corner&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span><span class="o">.</span><span class="n">xy_ll_wc</span><span class="p">()</span><span class="o">.</span><span class="n">xy_coordinate</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">point</span> <span class="o">==</span> <span class="s2">&quot;lower right corner&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span><span class="o">.</span><span class="n">xy_lr_wc</span><span class="p">()</span><span class="o">.</span><span class="n">xy_coordinate</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">point</span> <span class="o">==</span> <span class="s2">&quot;center point&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span><span class="o">.</span><span class="n">xy_center_wc</span><span class="p">()</span><span class="o">.</span><span class="n">xy_coordinate</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown point type: </span><span class="si">{</span><span class="n">point</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_workspace_home_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_workspace_home_id</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Returns the ID of the workspace at index 0.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the ID of the workspace at index 0.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_workspace_home_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the ID of the workspace at index 0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        the ID of the workspace at index 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_home_id</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.get_workspace_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_workspace_id</span><span class="p">(</span><span class="n">index</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return the id of the workspace at the given position index in the list of workspaces.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>index</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>0-based index in the list of workspaces.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the workspace at the given position index in the list of workspaces.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_workspace_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the id of the workspace at the given position index in the list of workspaces.</span>

<span class="sd">    Args:</span>
<span class="sd">        index: 0-based index in the list of workspaces.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: id of the workspace at the given position index in the list of workspaces.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_id</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.is_any_workspace_visible" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_any_workspace_visible</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Check if any workspace is currently visible.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_any_workspace_visible</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if any workspace is currently visible.&quot;&quot;&quot;</span>
    <span class="n">pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_robot_pose</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible_workspace</span><span class="p">(</span><span class="n">pose</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.metrics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">metrics</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get performance metrics tracker.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PerformanceMetrics</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get performance metrics tracker.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.oralcom_call_text2speech_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">oralcom_call_text2speech_async</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Asynchronously call text-to-speech API.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message for text-to-speech</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>priority</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Priority (0-10, higher = more urgent)</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if queued successfully (or dummy thread for compatibility)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">oralcom_call_text2speech_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronously call text-to-speech API.</span>

<span class="sd">    Args:</span>
<span class="sd">        text: Message for text-to-speech</span>
<span class="sd">        priority: Priority (0-10, higher = more urgent)</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if queued successfully (or dummy thread for compatibility)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oralcom</span><span class="o">.</span><span class="n">speak</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="n">priority</span><span class="p">,</span> <span class="n">blocking</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.print_performance_summary" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">print_performance_summary</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Print a human-readable performance summary.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">print_performance_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Print a human-readable performance summary.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">get_summary</span><span class="p">())</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Performance monitoring is disabled&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.remove_object_from_memory" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_object_from_memory</span><span class="p">(</span><span class="n">object_label</span><span class="p">,</span> <span class="n">coordinate</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Remove an object from memory after manipulation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>object_label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Label of the object to remove</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>coordinate</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Last known coordinate [x, y]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_object_from_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove an object from memory after manipulation.</span>

<span class="sd">    Args:</span>
<span class="sd">        object_label: Label of the object to remove</span>
<span class="sd">        coordinate: Last known coordinate [x, y]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No current workspace set&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">remove_object</span><span class="p">(</span>
        <span class="n">workspace_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">,</span> <span class="n">object_label</span><span class="o">=</span><span class="n">object_label</span><span class="p">,</span> <span class="n">coordinate</span><span class="o">=</span><span class="n">coordinate</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.remove_object_from_workspace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_object_from_workspace</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">object_label</span><span class="p">,</span> <span class="n">coordinate</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Remove an object from a specific workspace's memory.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_object_from_workspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">object_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">coordinate</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove an object from a specific workspace&#39;s memory.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">remove_object</span><span class="p">(</span><span class="n">workspace_id</span><span class="o">=</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">object_label</span><span class="o">=</span><span class="n">object_label</span><span class="p">,</span> <span class="n">coordinate</span><span class="o">=</span><span class="n">coordinate</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.reset_performance_metrics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset_performance_metrics</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Reset all performance metrics.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset_performance_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reset all performance metrics.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Performance metrics reset&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.robot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return robot object.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">robot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Robot</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return robot object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.robot_move2home_observation_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_move2home_observation_pose</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Move robot to home workspace observation pose.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">robot_move2home_observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Move robot to home workspace observation pose.&quot;&quot;&quot;</span>
    <span class="n">workspace_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workspace_home_id</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">robot_move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.robot_move2observation_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Move robot to observation pose for given workspace.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">robot_move2observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Move robot to observation pose for given workspace.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: ID of workspace</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;robot_move_observation&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="n">workspace_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Set current workspace to: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.set_current_workspace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_current_workspace</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Set the current workspace being observed.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_current_workspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the current workspace being observed.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="n">workspace_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current workspace set to: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.start_camera_updates" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_camera_updates</span><span class="p">(</span><span class="n">visualize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Start the background camera update thread.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>visualize</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, show the camera feed (requires GUI).</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="threading.Thread">Thread</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The started threading.Thread object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">start_camera_updates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visualize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Start the background camera update thread.</span>

<span class="sd">    Args:</span>
<span class="sd">        visualize: If True, show the camera feed (requires GUI).</span>

<span class="sd">    Returns:</span>
<span class="sd">        The started threading.Thread object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">loop</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_camera_and_objects</span><span class="p">(</span><span class="n">visualize</span><span class="o">=</span><span class="n">visualize</span><span class="p">):</span>
            <span class="k">pass</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">loop</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">t</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.stop_camera_updates" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop_camera_updates</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Stop camera update thread.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">stop_camera_updates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop camera update thread.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.update_camera_and_objects" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_camera_and_objects</span><span class="p">(</span><span class="n">visualize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Continuously updates the camera and detected objects.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>visualize</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, displays the updated camera feed</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_camera_and_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visualize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Continuously updates the camera and detected objects.</span>

<span class="sd">    Args:</span>
<span class="sd">        visualize: If True, displays the updated camera feed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># FIX: Get home workspace ID and set it as current</span>
    <span class="n">home_workspace_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span><span class="o">.</span><span class="n">get_workspace_home_id</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="n">home_workspace_id</span>  <span class="c1"># Set before moving</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">robot_move2observation_pose</span><span class="p">(</span><span class="n">home_workspace_id</span><span class="p">)</span>

    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
        <span class="n">loop_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>

        <span class="c1"># Get current frame with timing</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;frame_capture&quot;</span><span class="p">):</span>
                <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_frame</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_frame</span><span class="p">()</span>

        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

        <span class="c1"># Get detected objects from Redis</span>
        <span class="c1"># Get detected objects from Redis with timing</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">timer</span><span class="p">(</span><span class="s2">&quot;object_fetch_redis&quot;</span><span class="p">):</span>
                <span class="n">detected_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_detected_objects</span><span class="p">()</span>

            <span class="c1"># Record object count</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">increment_counter</span><span class="p">(</span><span class="s2">&quot;objects_detected&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">detected_objects</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">detected_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_detected_objects</span><span class="p">()</span>

        <span class="c1"># Update memory using ObjectMemoryManager</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">:</span>  <span class="c1"># This should now always be True</span>
            <span class="n">at_observation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_any_workspace_visible</span><span class="p">()</span>
            <span class="n">robot_moving</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_robot_in_motion</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
                <span class="n">mem_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>

            <span class="n">objects_added</span><span class="p">,</span> <span class="n">objects_updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="n">workspace_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">,</span>
                <span class="n">detected_objects</span><span class="o">=</span><span class="n">detected_objects</span><span class="p">,</span>
                <span class="n">at_observation_pose</span><span class="o">=</span><span class="n">at_observation</span><span class="p">,</span>
                <span class="n">robot_in_motion</span><span class="o">=</span><span class="n">robot_moving</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
                <span class="n">mem_duration</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">mem_start</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">record_memory_update</span><span class="p">(</span><span class="n">mem_duration</span><span class="p">,</span> <span class="n">objects_added</span><span class="p">,</span> <span class="n">objects_updated</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Memory update for &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="si">}</span><span class="s2">&#39;: &quot;</span> <span class="sa">f</span><span class="s2">&quot;added=</span><span class="si">{</span><span class="n">objects_added</span><span class="si">}</span><span class="s2">, updated=</span><span class="si">{</span><span class="n">objects_updated</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># This should never happen now, but log it if it does</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Current workspace ID is None - memory not updated!&quot;</span><span class="p">)</span>

        <span class="c1"># Record loop iteration time</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="p">:</span>
            <span class="n">loop_duration</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">loop_start</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_metrics</span><span class="o">.</span><span class="n">record_timing</span><span class="p">(</span><span class="s2">&quot;camera_loop_iteration&quot;</span><span class="p">,</span> <span class="n">loop_duration</span><span class="p">)</span>

        <span class="c1"># Log memory stats</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span><span class="p">:</span>
            <span class="n">stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">get_memory_stats</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">:</span>
                <span class="n">ws_stats</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Memory: </span><span class="si">{</span><span class="n">ws_stats</span><span class="p">[</span><span class="s1">&#39;object_count&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> objects, &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;manual_updates=</span><span class="si">{</span><span class="n">ws_stats</span><span class="p">[</span><span class="s1">&#39;manual_updates&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;visible=</span><span class="si">{</span><span class="n">ws_stats</span><span class="p">[</span><span class="s1">&#39;visible&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="k">yield</span> <span class="n">img</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_robot_in_motion</span><span class="p">():</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.update_object_in_memory" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_object_in_memory</span><span class="p">(</span><span class="n">object_label</span><span class="p">,</span> <span class="n">old_coordinate</span><span class="p">,</span> <span class="n">new_pose</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Update an object's position in memory after movement.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>object_label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Label of the object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>old_coordinate</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Previous coordinate [x, y]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>new_pose</code>
            </td>
            <td>
                  <code>&#39;PoseObjectPNP&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New pose after movement</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_object_in_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">old_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">new_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update an object&#39;s position in memory after movement.</span>

<span class="sd">    Args:</span>
<span class="sd">        object_label: Label of the object</span>
<span class="sd">        old_coordinate: Previous coordinate [x, y]</span>
<span class="sd">        new_pose: New pose after movement</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No current workspace set&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">mark_manual_update</span><span class="p">(</span>
        <span class="n">workspace_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_workspace_id</span><span class="p">,</span>
        <span class="n">object_label</span><span class="o">=</span><span class="n">object_label</span><span class="p">,</span>
        <span class="n">old_coordinate</span><span class="o">=</span><span class="n">old_coordinate</span><span class="p">,</span>
        <span class="n">new_pose</span><span class="o">=</span><span class="n">new_pose</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.update_object_in_workspace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_object_in_workspace</span><span class="p">(</span><span class="n">source_workspace_id</span><span class="p">,</span> <span class="n">target_workspace_id</span><span class="p">,</span> <span class="n">object_label</span><span class="p">,</span> <span class="n">old_coordinate</span><span class="p">,</span> <span class="n">new_coordinate</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Move an object from one workspace to another in memory.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source_workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of workspace where object currently is</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target_workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of workspace where object will be placed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>object_label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Label of the object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>old_coordinate</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current coordinate in source workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>new_coordinate</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New coordinate in target workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_object_in_workspace</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">source_workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target_workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">object_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">old_coordinate</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">new_coordinate</span><span class="p">:</span> <span class="nb">list</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Move an object from one workspace to another in memory.</span>

<span class="sd">    Args:</span>
<span class="sd">        source_workspace_id: ID of workspace where object currently is</span>
<span class="sd">        target_workspace_id: ID of workspace where object will be placed</span>
<span class="sd">        object_label: Label of the object</span>
<span class="sd">        old_coordinate: Current coordinate in source workspace</span>
<span class="sd">        new_coordinate: New coordinate in target workspace</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_memory_manager</span><span class="o">.</span><span class="n">move_object</span><span class="p">(</span>
        <span class="n">source_workspace_id</span><span class="o">=</span><span class="n">source_workspace_id</span><span class="p">,</span>
        <span class="n">target_workspace_id</span><span class="o">=</span><span class="n">target_workspace_id</span><span class="p">,</span>
        <span class="n">object_label</span><span class="o">=</span><span class="n">object_label</span><span class="p">,</span>
        <span class="n">old_coordinate</span><span class="o">=</span><span class="n">old_coordinate</span><span class="p">,</span>
        <span class="n">new_coordinate</span><span class="o">=</span><span class="n">new_coordinate</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.use_simulation" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">use_simulation</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Check if using simulation.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">use_simulation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if using simulation.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_use_simulation</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.environment.Environment.workspaces" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">workspaces</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return workspaces object.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/environment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">workspaces</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Workspaces</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return workspaces object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspaces</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>