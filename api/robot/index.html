
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A comprehensive Python framework for robotic pick-and-place operations with vision-based object detection">
      
      
      
        <link rel="canonical" href="https://dgaida.github.io/robot_environment/api/robot/">
      
      
        <link rel="prev" href="../environment/">
      
      
        <link rel="next" href="../camera/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Robot - Robot Environment</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#robot" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Robot Environment" class="md-header__button md-logo" aria-label="Robot Environment" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Robot Environment
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Robot
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../index.md#installation" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../environment/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contributing/" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Robot Environment" class="md-nav__button md-logo" aria-label="Robot Environment" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Robot Environment
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.md#installation" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../environment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Environment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Robot
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Robot
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Robot
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Robot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.calibrate" class="md-nav__link">
    <span class="md-ellipsis">
      
        calibrate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.get_detected_objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_detected_objects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.get_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.get_target_pose_from_rel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_target_pose_from_rel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.handle_object_detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        handle_object_detection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.move2observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        move2observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.pick_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        pick_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.pick_object_from_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        pick_object_from_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.pick_place_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        pick_place_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.pick_place_object_across_workspaces" class="md-nav__link">
    <span class="md-ellipsis">
      
        pick_place_object_across_workspaces
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.place_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        place_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.place_object_in_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        place_object_in_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.push_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        push_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.robot" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.robot_in_motion" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_in_motion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.verbose" class="md-nav__link">
    <span class="md-ellipsis">
      
        verbose
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#controllers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controllers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Controllers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robotcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      
        RobotController
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController" class="md-nav__link">
    <span class="md-ellipsis">
      
        RobotController
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RobotController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.calibrate" class="md-nav__link">
    <span class="md-ellipsis">
      
        calibrate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.get_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.get_target_pose_from_rel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_target_pose_from_rel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.is_in_motion" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_in_motion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.lock" class="md-nav__link">
    <span class="md-ellipsis">
      
        lock
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.move2observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        move2observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.robot_ctrl" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_ctrl
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.robot_pick_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_pick_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.robot_place_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_place_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.robot_push_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_push_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.verbose" class="md-nav__link">
    <span class="md-ellipsis">
      
        verbose
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#niryorobotcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      
        NiryoRobotController
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController" class="md-nav__link">
    <span class="md-ellipsis">
      
        NiryoRobotController
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NiryoRobotController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.calibrate" class="md-nav__link">
    <span class="md-ellipsis">
      
        calibrate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      
        cleanup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.get_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.get_target_pose_from_rel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_target_pose_from_rel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.move2observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        move2observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.reset_connection" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_connection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.robot_pick_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_pick_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.robot_place_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_place_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.robot_push_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_push_object
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#widowxrobotcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      
        WidowXRobotController
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController" class="md-nav__link">
    <span class="md-ellipsis">
      
        WidowXRobotController
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WidowXRobotController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.calibrate" class="md-nav__link">
    <span class="md-ellipsis">
      
        calibrate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.get_camera_intrinsics" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_camera_intrinsics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.get_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.get_target_pose_from_rel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_target_pose_from_rel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.move2observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        move2observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.reset_connection" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_connection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.robot_pick_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_pick_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.robot_place_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_place_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.robot_push_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_push_object
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../camera/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Camera
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TESTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Robot
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Robot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.calibrate" class="md-nav__link">
    <span class="md-ellipsis">
      
        calibrate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.get_detected_objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_detected_objects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.get_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.get_target_pose_from_rel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_target_pose_from_rel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.handle_object_detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        handle_object_detection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.move2observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        move2observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.pick_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        pick_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.pick_object_from_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        pick_object_from_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.pick_place_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        pick_place_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.pick_place_object_across_workspaces" class="md-nav__link">
    <span class="md-ellipsis">
      
        pick_place_object_across_workspaces
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.place_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        place_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.place_object_in_workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        place_object_in_workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.push_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        push_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.robot" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.robot_in_motion" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_in_motion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot.Robot.verbose" class="md-nav__link">
    <span class="md-ellipsis">
      
        verbose
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#controllers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controllers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Controllers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robotcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      
        RobotController
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController" class="md-nav__link">
    <span class="md-ellipsis">
      
        RobotController
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RobotController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.calibrate" class="md-nav__link">
    <span class="md-ellipsis">
      
        calibrate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.get_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.get_target_pose_from_rel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_target_pose_from_rel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.is_in_motion" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_in_motion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.lock" class="md-nav__link">
    <span class="md-ellipsis">
      
        lock
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.move2observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        move2observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.robot_ctrl" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_ctrl
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.robot_pick_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_pick_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.robot_place_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_place_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.robot_push_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_push_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.robot_controller.RobotController.verbose" class="md-nav__link">
    <span class="md-ellipsis">
      
        verbose
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#niryorobotcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      
        NiryoRobotController
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController" class="md-nav__link">
    <span class="md-ellipsis">
      
        NiryoRobotController
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NiryoRobotController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.calibrate" class="md-nav__link">
    <span class="md-ellipsis">
      
        calibrate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      
        cleanup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.get_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.get_target_pose_from_rel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_target_pose_from_rel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.move2observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        move2observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.reset_connection" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_connection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.robot_pick_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_pick_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.robot_place_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_place_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.niryo_robot_controller.NiryoRobotController.robot_push_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_push_object
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#widowxrobotcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      
        WidowXRobotController
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController" class="md-nav__link">
    <span class="md-ellipsis">
      
        WidowXRobotController
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WidowXRobotController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.calibrate" class="md-nav__link">
    <span class="md-ellipsis">
      
        calibrate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.get_camera_intrinsics" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_camera_intrinsics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.get_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.get_target_pose_from_rel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_target_pose_from_rel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.move2observation_pose" class="md-nav__link">
    <span class="md-ellipsis">
      
        move2observation_pose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.reset_connection" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_connection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.robot_pick_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_pick_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.robot_place_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_place_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot_environment.robot.widowx_robot_controller.WidowXRobotController.robot_push_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        robot_push_object
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="robot">Robot</h1>


<div class="doc doc-object doc-class">



<h2 id="robot_environment.robot.robot.Robot" class="doc doc-heading">
            <code>robot_environment.robot.robot.Robot</code>


</h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="robot_environment.robot.robot_api.RobotAPI">RobotAPI</span></code></p>










              <details class="mkdocstrings-source">
                <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Robot</span><span class="p">(</span><span class="n">RobotAPI</span><span class="p">):</span>
    <span class="c1"># *** CONSTRUCTORS ***</span>
    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">environment</span><span class="p">:</span> <span class="s2">&quot;Environment&quot;</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">robot_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;niryo&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates robot object. Creates these objects:</span>
<span class="sd">        - RobotController</span>

<span class="sd">        Args:</span>
<span class="sd">            environment:</span>
<span class="sd">            use_simulation: if True, then simulate the robot, else the real robot is used</span>
<span class="sd">            robot_id: string defining the robot. can be &quot;niryo&quot; or &quot;widowx&quot;</span>
<span class="sd">            verbose:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_environment</span> <span class="o">=</span> <span class="n">environment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">get_package_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initializing robot: </span><span class="si">{</span><span class="n">robot_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">robot_id</span> <span class="o">==</span> <span class="s2">&quot;niryo&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span> <span class="o">=</span> <span class="n">NiryoRobotController</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">handle_object_detection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects_dict_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process incoming object detections from Redis&quot;&quot;&quot;</span>
        <span class="c1"># Convert dictionaries back to Object instances</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="n">Objects</span><span class="o">.</span><span class="n">dict_list_to_objects</span><span class="p">(</span><span class="n">objects_dict_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_workspace</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

        <span class="c1"># Now work with Object instances as before</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received object: </span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">label</span><span class="p">()</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">xy_com</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current pose of gripper of robot.</span>

<span class="sd">        Returns:</span>
<span class="sd">            current pose of gripper of robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_target_pose_from_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">yaw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),</span>
<span class="sd">        calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the</span>
<span class="sd">        given coordinate an object that has the given orientation. For this method to work, it is important that</span>
<span class="sd">        only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot</span>
<span class="sd">        this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: id of the workspace</span>
<span class="sd">            u_rel: horizontal coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">            v_rel: vertical coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">            yaw: orientation of an object at the pixel coordinates [u_rel, v_rel].</span>

<span class="sd">        Returns:</span>
<span class="sd">            pose_object: Pose of the point in world coordinates of the robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;robot::get_target_pose_from_rel </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">u_rel</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">v_rel</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">yaw</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span>

    <span class="c1"># *** PUBLIC methods ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calibrate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calibrates the Robot.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if calibration was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">calibrate</span><span class="p">()</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">move2observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The robot will move to a pose where it can observe (the gripper hovers over) the workspace given by workspace_id.</span>
<span class="sd">        Before a robot can pick up or place an object in a workspace, it must first move to this observation pose of the corresponding workspace.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: id of the workspace</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

    <span class="c1"># TODO: the documentation of these pick methods is more upto date as teh one in robot_api</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pick_place_object</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pick_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
        <span class="n">place_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
        <span class="n">location</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">z_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instructs the pick-and-place robot arm to pick a specific object and place it using its gripper.</span>
<span class="sd">        The gripper will move to the specified &#39;pick_coordinate&#39; and pick the named object. It will then move to the</span>
<span class="sd">        specified &#39;place_coordinate&#39; and place the object there. If you need to pick-and-place an object, call this</span>
<span class="sd">        function and not robot_pick_object() followed by robot_place_object().</span>

<span class="sd">        Example call:</span>

<span class="sd">        robot.pick_place_object(</span>
<span class="sd">            object_name=&#39;chocolate bar&#39;,</span>
<span class="sd">            pick_coordinate=[-0.1, 0.01],</span>
<span class="sd">            place_coordinate=[0.1, 0.11],</span>
<span class="sd">            location=Location.RIGHT_NEXT_TO</span>
<span class="sd">        )</span>
<span class="sd">        --&gt; Picks the chocolate bar that is located at world coordinates [-0.1, 0.01] and places it right next to an</span>
<span class="sd">        object that exists at world coordinate [0.1, 0.11].</span>

<span class="sd">        robot.pick_place_object(</span>
<span class="sd">            object_name=&#39;cube&#39;,</span>
<span class="sd">            pick_coordinate=[0.2, 0.05],</span>
<span class="sd">            place_coordinate=[0.3, 0.1],</span>
<span class="sd">            location=Location.ON_TOP_OF,</span>
<span class="sd">            z_offset=0.02</span>
<span class="sd">        )</span>
<span class="sd">        --&gt; Picks the cube with a 2cm z-offset (useful if it&#39;s on top of another object).</span>

<span class="sd">        Args:</span>
<span class="sd">            object_name (str): The name of the object to be picked up. Ensure this name matches an object visible in</span>
<span class="sd">            the robot&#39;s workspace.</span>
<span class="sd">            pick_coordinate (List): The world coordinates [x, y] where the object should be picked up. Use these</span>
<span class="sd">            coordinates to identify the object&#39;s exact position.</span>
<span class="sd">            place_coordinate (List): The world coordinates [x, y] where the object should be placed at.</span>
<span class="sd">            location (Location): Specifies the relative placement position of the picked object with respect to an object</span>
<span class="sd">            being at the &#39;place_coordinate&#39;. Possible values are defined in the `Location` Enum:</span>
<span class="sd">                - `Location.LEFT_NEXT_TO`: Left of the reference object.</span>
<span class="sd">                - `Location.RIGHT_NEXT_TO`: Right of the reference object.</span>
<span class="sd">                - `Location.ABOVE`: Above the reference object.</span>
<span class="sd">                - `Location.BELOW`: Below the reference object.</span>
<span class="sd">                - `Location.ON_TOP_OF`: On top of the reference object.</span>
<span class="sd">                - `Location.INSIDE`: Inside the reference object.</span>
<span class="sd">                - `Location.NONE`: No specific location relative to another object.</span>
<span class="sd">            z_offset (float): Additional height offset in meters to apply when picking (default: 0.001).</span>
<span class="sd">            Useful for picking objects that are stacked on top of other objects.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if successful</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_object</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">,</span> <span class="n">z_offset</span><span class="o">=</span><span class="n">z_offset</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
            <span class="n">place_success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">place_object</span><span class="p">(</span><span class="n">place_coordinate</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">place_success</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pick_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">z_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Command the pick-and-place robot arm to pick up a specific object using its gripper. The gripper will move to</span>
<span class="sd">        the specified &#39;pick_coordinate&#39; and pick the named object.</span>

<span class="sd">        Example call:</span>

<span class="sd">        robot.pick_object(&quot;pen&quot;, [0.01, -0.15])</span>
<span class="sd">        --&gt; Picks the pen that is located at world coordinates [0.01, -0.15].</span>

<span class="sd">        robot.pick_object(&quot;pen&quot;, [0.01, -0.15], z_offset=0.02)</span>
<span class="sd">        --&gt; Picks the pen with a 2cm offset above its detected position (useful for stacked objects).</span>

<span class="sd">        Args:</span>
<span class="sd">            object_name (str): The name of the object to be picked up. Ensure this name matches an object visible in</span>
<span class="sd">            the robot&#39;s workspace.</span>
<span class="sd">            pick_coordinate (List): The world coordinates [x, y] where the object should be picked up. Use these</span>
<span class="sd">            coordinates to identify the object&#39;s exact position.</span>
<span class="sd">            z_offset (float): Additional height offset in meters to apply when picking (default: 0.001).</span>
<span class="sd">            Useful for picking objects that are stacked on top of other objects.</span>
<span class="sd">        Returns:</span>
<span class="sd">            bool: True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coords_str</span> <span class="o">=</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pick_coordinate</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Going to pick </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> at coordinate </span><span class="si">{</span><span class="n">coords_str</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">oralcom_call_text2speech_async</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

        <span class="n">obj_to_pick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nearest_object</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">obj_to_pick</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="o">=</span> <span class="n">obj_to_pick</span>

            <span class="c1"># Apply z_offset to the pick pose</span>
            <span class="n">pick_pose</span> <span class="o">=</span> <span class="n">obj_to_pick</span><span class="o">.</span><span class="n">pose_com</span><span class="p">()</span>
            <span class="n">pick_pose</span> <span class="o">=</span> <span class="n">pick_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="n">z_offset</span><span class="p">)</span>

            <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_pick_object</span><span class="p">(</span><span class="n">pick_pose</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># thread_oral.join()</span>

        <span class="k">return</span> <span class="n">success</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">place_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">location</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct the pick-and-place robot arm to place a picked object at the specified &#39;place_coordinate&#39;. The</span>
<span class="sd">        function moves the gripper to the specified &#39;place_coordinate&#39; and calculates the exact placement position from</span>
<span class="sd">        the given &#39;location&#39;. Before calling this function you have to call robot_pick_object() to pick an object.</span>

<span class="sd">        Example call:</span>

<span class="sd">        robot.place_object([0.2, 0.0], &quot;left next to&quot;)</span>
<span class="sd">        --&gt; Places the already gripped object left next to the world coordinate [0.2, 0.0].</span>

<span class="sd">        Args:</span>
<span class="sd">            place_coordinate: The world coordinates [x, y] of the target object.</span>
<span class="sd">            location (str): Specifies the relative placement position of the picked object in relation to an object</span>
<span class="sd">            being at the &#39;place_coordinate&#39;. Possible positions: &#39;left next to&#39;, &#39;right next to&#39;, &#39;above&#39;, &#39;below&#39;,</span>
<span class="sd">            &#39;on top of&#39;, &#39;inside&#39;, or None. Set to None, if there is no location given in the task.</span>
<span class="sd">        Returns:</span>
<span class="sd">            bool: True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">location</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">convert_str2location</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="p">:</span>
            <span class="n">old_coordinate</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">x_com</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">y_com</span><span class="p">()]</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Going to place </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">label</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> coordinate [&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">].&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">old_coordinate</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Going to place it </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> coordinate [</span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">].&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">oralcom_call_text2speech_async</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
        <span class="n">obj_where_to_place</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">Location</span><span class="o">.</span><span class="n">NONE</span><span class="p">:</span>
            <span class="n">obj_where_to_place</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nearest_object</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj_where_to_place</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">place_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.09</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">place_pose</span> <span class="o">=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">pose_center</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">place_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.09</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;place_object: </span><span class="si">{</span><span class="n">place_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">x_off</span> <span class="o">=</span> <span class="mf">0.02</span>
        <span class="n">y_off</span> <span class="o">=</span> <span class="mf">0.02</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="p">:</span>
            <span class="n">x_off</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">y_off</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="n">place_pose</span><span class="p">:</span>
            <span class="c1"># TODO: use height of object instead</span>
            <span class="k">if</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">ON_TOP_OF</span><span class="p">:</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">z</span> <span class="o">+=</span> <span class="mf">0.02</span>
            <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">INSIDE</span><span class="p">:</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">z</span> <span class="o">+=</span> <span class="mf">0.01</span>
            <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">RIGHT_NEXT_TO</span><span class="p">:</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y_off</span>
            <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">LEFT_NEXT_TO</span><span class="p">:</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y_off</span>
            <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">BELOW</span><span class="p">:</span>
                <span class="c1"># print(obj_where_to_place.height_m(), self._object_last_picked.width_m(), x_off)</span>
                <span class="c1"># TODO: nutze hier auch width, da width immer die grere gre ist und nicht eine koordinatenrichtugn hat</span>
                <span class="c1">#  ich muss anstatt width und height eine gre haben dim_x und dim_y, die a x und y koordinate gebunden sind</span>
                <span class="c1">#  ich habe das in object klasse repariert, width geht immer entlang y-achse jetzt. prfen hier</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">x_off</span>
            <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">ABOVE</span><span class="p">:</span>
                <span class="c1"># TODO: nutze hier auch width, da width immer die grere gre ist und nicht eine koordinatenrichtugn hat</span>
                <span class="c1">#  ich habe das in object klasse repariert, width geht immer entlang y-achse jetzt. prfen hier</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">height_m</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">width_m</span><span class="p">(),</span> <span class="n">x_off</span><span class="p">)</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">x_off</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">place_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">location</span> <span class="ow">is</span> <span class="n">Location</span><span class="o">.</span><span class="n">NONE</span> <span class="ow">or</span> <span class="n">location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># I do not have to do anything as the given location is where to place the object</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown location: </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> (type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">location</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

            <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_place_object</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span>

            <span class="c1"># update position of placed object to the new position</span>
            <span class="c1"># Update memory after successful placement</span>
            <span class="k">if</span> <span class="n">success</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="ow">and</span> <span class="n">old_coordinate</span><span class="p">:</span>
                <span class="n">final_coordinate</span> <span class="o">=</span> <span class="p">[</span><span class="n">place_pose</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">place_pose</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;final_coordinate: </span><span class="si">{</span><span class="n">final_coordinate</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">update_object_in_memory</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">label</span><span class="p">(),</span> <span class="n">old_coordinate</span><span class="p">,</span> <span class="n">new_pose</span><span class="o">=</span><span class="n">place_pose</span>
                <span class="p">)</span>

                <span class="c1"># Give the memory system a moment to register the update</span>
                <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># thread_oral.join()</span>

        <span class="k">return</span> <span class="n">success</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">push_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">push_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instruct the pick-and-place robot arm to push a specific object to a new position.</span>
<span class="sd">        This function should only be called if it is not possible to pick the object.</span>
<span class="sd">        An object cannot be picked if its shorter side is larger than the gripper.</span>

<span class="sd">        Args:</span>
<span class="sd">            object_name (str): The name of the object to be pushed.</span>
<span class="sd">            Ensure the name matches an object in the robot&#39;s environment.</span>
<span class="sd">            push_coordinate: The world coordinates [x, y] where the object to push is located.</span>
<span class="sd">            These coordinates indicate the initial position of the object.</span>
<span class="sd">            direction (str): The direction in which to push the object.</span>
<span class="sd">            Valid options are: &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, &quot;right&quot;.</span>
<span class="sd">            distance: The distance (in millimeters) to push the object in the specified direction.</span>
<span class="sd">            Ensure the value is within the robot&#39;s operating range.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Calling push with </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">oralcom_call_text2speech_async</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

        <span class="n">obj_to_push</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nearest_object</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">push_coordinate</span><span class="p">)</span>

        <span class="n">push_pose</span> <span class="o">=</span> <span class="n">obj_to_push</span><span class="o">.</span><span class="n">pose_com</span><span class="p">()</span>

        <span class="c1"># it is certainly better when pushing up to move under the object with a closed gripper so we can</span>
        <span class="c1">#  actually push up. same for the other directions.</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;up&quot;</span><span class="p">:</span>
            <span class="n">push_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">obj_to_push</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="c1"># gripper 90 rotated. TODO: I have to test these orientations</span>
            <span class="n">push_pose</span><span class="o">.</span><span class="n">yaw</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;down&quot;</span><span class="p">:</span>
            <span class="n">push_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">obj_to_push</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="c1"># gripper 90 rotated. TODO: I have to test these orientations</span>
            <span class="n">push_pose</span><span class="o">.</span><span class="n">yaw</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
            <span class="n">push_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">obj_to_push</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="c1"># gripper 0 rotated. TODO: I have to test these orientations</span>
            <span class="n">push_pose</span><span class="o">.</span><span class="n">yaw</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
            <span class="n">push_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">obj_to_push</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="c1"># gripper 0 rotated. TODO: I have to test these orientations</span>
            <span class="n">push_pose</span><span class="o">.</span><span class="n">yaw</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown direction: </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">obj_to_push</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_push_object</span><span class="p">(</span><span class="n">push_pose</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># thread_oral.join()</span>

        <span class="k">return</span> <span class="n">success</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pick_place_object_across_workspaces</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pick_workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pick_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
        <span class="n">place_workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">place_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
        <span class="n">location</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">z_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pick an object from one workspace and place it in another workspace.</span>

<span class="sd">        Args:</span>
<span class="sd">            object_name: Name of the object to pick</span>
<span class="sd">            pick_workspace_id: ID of the workspace to pick from</span>
<span class="sd">            pick_coordinate: [x, y] coordinate in pick workspace</span>
<span class="sd">            place_workspace_id: ID of the workspace to place in</span>
<span class="sd">            place_coordinate: [x, y] coordinate in place workspace</span>
<span class="sd">            location: Relative placement location (Location enum or string)</span>
<span class="sd">            z_offset: Additional height offset in meters when picking (default: 0.001)</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if successful, False otherwise</span>

<span class="sd">        Example:</span>
<span class="sd">            robot.pick_place_object_across_workspaces(</span>
<span class="sd">                object_name=&#39;cube&#39;,</span>
<span class="sd">                pick_workspace_id=&#39;niryo_ws_left&#39;,</span>
<span class="sd">                pick_coordinate=[0.2, 0.05],</span>
<span class="sd">                place_workspace_id=&#39;niryo_ws_right&#39;,</span>
<span class="sd">                place_coordinate=[0.25, -0.05],</span>
<span class="sd">                location=Location.RIGHT_NEXT_TO,</span>
<span class="sd">                z_offset=0.02</span>
<span class="sd">            )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Multi-workspace operation: </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Pick from: </span><span class="si">{</span><span class="n">pick_workspace_id</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">pick_coordinate</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Place in: </span><span class="si">{</span><span class="n">place_workspace_id</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">place_coordinate</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Step 1: Move to pick workspace observation pose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">pick_workspace_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="n">pick_workspace_id</span>

        <span class="c1"># Step 2: Pick the object</span>
        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_object_from_workspace</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">pick_workspace_id</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">,</span> <span class="n">z_offset</span><span class="o">=</span><span class="n">z_offset</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to pick </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">pick_workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Step 3: Move to place workspace observation pose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">place_workspace_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="n">place_workspace_id</span>

        <span class="c1"># Step 4: Place the object</span>
        <span class="n">place_success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">place_object_in_workspace</span><span class="p">(</span><span class="n">place_workspace_id</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">place_success</span><span class="p">:</span>
            <span class="c1"># Update memory: remove from source, add to target</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">update_object_in_workspace</span><span class="p">(</span>
                <span class="n">source_workspace_id</span><span class="o">=</span><span class="n">pick_workspace_id</span><span class="p">,</span>
                <span class="n">target_workspace_id</span><span class="o">=</span><span class="n">place_workspace_id</span><span class="p">,</span>
                <span class="n">object_label</span><span class="o">=</span><span class="n">object_name</span><span class="p">,</span>
                <span class="n">old_coordinate</span><span class="o">=</span><span class="n">pick_coordinate</span><span class="p">,</span>
                <span class="n">new_coordinate</span><span class="o">=</span><span class="n">place_coordinate</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully moved </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">pick_workspace_id</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">place_workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">place_success</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pick_object_from_workspace</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">z_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pick an object from a specific workspace.</span>

<span class="sd">        Args:</span>
<span class="sd">            object_name: Name of the object to pick</span>
<span class="sd">            workspace_id: ID of the workspace</span>
<span class="sd">            pick_coordinate: [x, y] coordinate in workspace</span>
<span class="sd">            z_offset: Additional height offset in meters (default: 0.001)</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if successful</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coords_str</span> <span class="o">=</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pick_coordinate</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Picking </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> from workspace </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">coords_str</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">oralcom_call_text2speech_async</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

        <span class="c1"># Get object from specific workspace memory</span>
        <span class="n">obj_to_pick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nearest_object_in_workspace</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">obj_to_pick</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="o">=</span> <span class="n">obj_to_pick</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_object_source_workspace</span> <span class="o">=</span> <span class="n">workspace_id</span>

            <span class="c1"># Apply z_offset to the pick pose</span>
            <span class="n">pick_pose</span> <span class="o">=</span> <span class="n">obj_to_pick</span><span class="o">.</span><span class="n">pose_com</span><span class="p">()</span>
            <span class="n">pick_pose</span> <span class="o">=</span> <span class="n">pick_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="n">z_offset</span><span class="p">)</span>

            <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_pick_object</span><span class="p">(</span><span class="n">pick_pose</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># thread_oral.join()</span>
        <span class="k">return</span> <span class="n">success</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">place_object_in_workspace</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">location</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Place a picked object in a specific workspace.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: ID of the target workspace</span>
<span class="sd">            place_coordinate: [x, y] coordinate in workspace</span>
<span class="sd">            location: Relative placement location</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if successful</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">location</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">convert_str2location</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Placing </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">label</span><span class="p">()</span><span class="si">}</span><span class="s2"> in workspace &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> coordinate &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">].&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Placing object in workspace </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;coordinate [</span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">].&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">oralcom_call_text2speech_async</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

        <span class="c1"># Get workspace for coordinate transformation</span>
        <span class="n">workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Workspace </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
            <span class="c1"># thread_oral.join()</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Find reference object in target workspace if location specified</span>
        <span class="n">obj_where_to_place</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">Location</span><span class="o">.</span><span class="n">NONE</span><span class="p">:</span>
            <span class="n">obj_where_to_place</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nearest_object_in_workspace</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">obj_where_to_place</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">place_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.09</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">place_pose</span> <span class="o">=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">pose_center</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">place_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.09</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="c1"># Calculate placement offset based on location</span>
        <span class="k">if</span> <span class="n">place_pose</span> <span class="ow">and</span> <span class="n">obj_where_to_place</span><span class="p">:</span>
            <span class="n">x_off</span> <span class="o">=</span> <span class="mf">0.02</span>
            <span class="n">y_off</span> <span class="o">=</span> <span class="mf">0.02</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="p">:</span>
                <span class="n">x_off</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
                <span class="n">y_off</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>

            <span class="k">if</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">ON_TOP_OF</span><span class="p">:</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">z</span> <span class="o">+=</span> <span class="mf">0.02</span>
            <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">INSIDE</span><span class="p">:</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">z</span> <span class="o">+=</span> <span class="mf">0.01</span>
            <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">RIGHT_NEXT_TO</span><span class="p">:</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y_off</span>
            <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">LEFT_NEXT_TO</span><span class="p">:</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y_off</span>
            <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">BELOW</span><span class="p">:</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">x_off</span>
            <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">ABOVE</span><span class="p">:</span>
                <span class="n">place_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">x_off</span>

        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_place_object</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span>

        <span class="c1"># Clear last picked object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s2">&quot;_object_source_workspace&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_source_workspace</span>

        <span class="c1"># thread_oral.join()</span>
        <span class="k">return</span> <span class="n">success</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_nearest_object_in_workspace</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target_coords</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Object</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the nearest object in a specific workspace.</span>

<span class="sd">        Args:</span>
<span class="sd">            label: Object label to search for (None for any object)</span>
<span class="sd">            workspace_id: ID of the workspace</span>
<span class="sd">            target_coords: Target coordinates [x, y]</span>

<span class="sd">        Returns:</span>
<span class="sd">            Object or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get objects from specific workspace memory</span>
        <span class="n">detected_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_detected_objects_from_workspace</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Objects in workspace </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">detected_objects</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">target_coords</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">nearest_object</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">obj</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">detected_objects</span> <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">label</span><span class="p">()</span> <span class="o">==</span> <span class="n">label</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">min_distance</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nearest_object</span><span class="p">,</span> <span class="n">min_distance</span> <span class="o">=</span> <span class="n">detected_objects</span><span class="o">.</span><span class="n">get_nearest_detected_object</span><span class="p">(</span><span class="n">target_coords</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">nearest_object</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="n">nearest_object</span><span class="o">.</span><span class="n">label</span><span class="p">()</span><span class="si">}</span><span class="s2"> at distance </span><span class="si">{</span><span class="n">min_distance</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">m&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Object </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2"> not found in workspace </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Available objects: &quot;</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">detected_objects</span><span class="o">.</span><span class="n">get_detected_objects_as_comma_separated_string</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">nearest_object</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_command</span><span class="p">(</span><span class="n">line</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a single line of the input into the target object, method, positional arguments, and keyword arguments.</span>
<span class="sd">        Deprecated: Use robot_environment.robot.command_processor.parse_robot_command instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">parse_robot_command</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_detected_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get latest detected objects from memory.&quot;&quot;&quot;</span>
        <span class="n">latest_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_environment</span><span class="o">.</span><span class="n">get_detected_objects_from_memory</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">latest_objects</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_nearest_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">target_coords</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Object</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the nearest object with the specified label.</span>

<span class="sd">        Args:</span>
<span class="sd">            label:</span>
<span class="sd">            target_coords:</span>

<span class="sd">        Returns:</span>
<span class="sd">            object:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">detected_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_detected_objects</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;detected_objects: </span><span class="si">{</span><span class="n">detected_objects</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">target_coords</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># then no target coords are given, true for push method</span>
            <span class="n">nearest_object</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">obj</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">detected_objects</span> <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">label</span><span class="p">()</span> <span class="o">==</span> <span class="n">label</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">min_distance</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nearest_object</span><span class="p">,</span> <span class="n">min_distance</span> <span class="o">=</span> <span class="n">detected_objects</span><span class="o">.</span><span class="n">get_nearest_detected_object</span><span class="p">(</span><span class="n">target_coords</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">nearest_object</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nearest object found: </span><span class="si">{</span><span class="n">nearest_object</span><span class="si">}</span><span class="s2"> with distance </span><span class="si">{</span><span class="n">min_distance</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Object </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2"> does not exist: &quot;</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">detected_objects</span><span class="o">.</span><span class="n">get_detected_objects_as_comma_separated_string</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="c1"># add functionality that looks for the most similar object in self.get_detected_objects()</span>
            <span class="c1"># and ask user whether this object should be used instead. if answer of user is yes, then set</span>
            <span class="c1"># nearest_object to this new object</span>
            <span class="c1"># TODO: get_most_similar_object wieder nutzen</span>
            <span class="c1">#  nearest_object_name = self.environment().get_most_similar_object(label)</span>
            <span class="n">nearest_object_name</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">nearest_object_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;I have detected the object </span><span class="si">{</span><span class="n">nearest_object_name</span><span class="si">}</span><span class="s2">. Do you want to handle this object instead?&quot;</span>
                <span class="p">)</span>

                <span class="c1"># TODO: auf antwort von user warten und diese prfen.</span>
                <span class="n">answer</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>

                <span class="k">if</span> <span class="n">answer</span> <span class="o">!=</span> <span class="s2">&quot;yes&quot;</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">nearest_object</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">obj</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">detected_objects</span> <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">label</span><span class="p">()</span> <span class="o">==</span> <span class="n">nearest_object_name</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">nearest_object</span>

    <span class="c1"># *** PUBLIC properties ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">environment</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Environment</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_environment</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">robot_in_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: value of _robot_in_motion:</span>
<span class="sd">        False: robot is not in motion</span>
<span class="sd">        True: robot is in motion and therefore maybe cannot see the workspace markers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">is_in_motion</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">robot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RobotController</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns:</span>
<span class="sd">            RobotController: object that controls the robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns: True, if verbose is on, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span>

    <span class="c1"># *** PRIVATE variables ***</span>

    <span class="n">_environment</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># RobotController object</span>
    <span class="n">_robot</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># True, if robot is in motion and therefore cannot see the workspace markers</span>
    <span class="c1"># _robot_in_motion = False</span>

    <span class="n">_object_source_workspace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Track source workspace</span>

    <span class="n">_verbose</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_logger</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">








<h3 id="robot_environment.robot.robot.Robot-functions">Functions</h3>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">environment</span><span class="p">,</span> <span class="n">use_simulation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">robot_id</span><span class="o">=</span><span class="s1">&#39;niryo&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Creates robot object. Creates these objects:
- RobotController</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>environment</code>
            </td>
            <td>
                  <code>&#39;Environment&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>use_simulation</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True, then simulate the robot, else the real robot is used</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>robot_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>string defining the robot. can be "niryo" or "widowx"</p>
              </div>
            </td>
            <td>
                  <code>&#39;niryo&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">environment</span><span class="p">:</span> <span class="s2">&quot;Environment&quot;</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">robot_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;niryo&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates robot object. Creates these objects:</span>
<span class="sd">    - RobotController</span>

<span class="sd">    Args:</span>
<span class="sd">        environment:</span>
<span class="sd">        use_simulation: if True, then simulate the robot, else the real robot is used</span>
<span class="sd">        robot_id: string defining the robot. can be &quot;niryo&quot; or &quot;widowx&quot;</span>
<span class="sd">        verbose:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_environment</span> <span class="o">=</span> <span class="n">environment</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span> <span class="o">=</span> <span class="n">verbose</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">get_package_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initializing robot: </span><span class="si">{</span><span class="n">robot_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">robot_id</span> <span class="o">==</span> <span class="s2">&quot;niryo&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span> <span class="o">=</span> <span class="n">NiryoRobotController</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.calibrate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calibrate</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Calibrates the Robot.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if calibration was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calibrate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calibrates the Robot.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if calibration was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">calibrate</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.get_detected_objects" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_detected_objects</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get latest detected objects from memory.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_detected_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get latest detected objects from memory.&quot;&quot;&quot;</span>
    <span class="n">latest_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_environment</span><span class="o">.</span><span class="n">get_detected_objects_from_memory</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">latest_objects</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.get_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pose</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get current pose of gripper of robot.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>current pose of gripper of robot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get current pose of gripper of robot.</span>

<span class="sd">    Returns:</span>
<span class="sd">        current pose of gripper of robot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.get_target_pose_from_rel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),
calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the
given coordinate an object that has the given orientation. For this method to work, it is important that
only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot
this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>u_rel</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>horizontal coordinate in image of workspace, normalized between 0 and 1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>v_rel</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>vertical coordinate in image of workspace, normalized between 0 and 1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>yaw</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>orientation of an object at the pixel coordinates [u_rel, v_rel].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>pose_object</code></td>            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pose of the point in world coordinates of the robot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_target_pose_from_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">yaw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),</span>
<span class="sd">    calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the</span>
<span class="sd">    given coordinate an object that has the given orientation. For this method to work, it is important that</span>
<span class="sd">    only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot</span>
<span class="sd">    this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: id of the workspace</span>
<span class="sd">        u_rel: horizontal coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">        v_rel: vertical coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">        yaw: orientation of an object at the pixel coordinates [u_rel, v_rel].</span>

<span class="sd">    Returns:</span>
<span class="sd">        pose_object: Pose of the point in world coordinates of the robot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;robot::get_target_pose_from_rel </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">u_rel</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">v_rel</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">yaw</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.handle_object_detection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle_object_detection</span><span class="p">(</span><span class="n">objects_dict_list</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Process incoming object detections from Redis</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">handle_object_detection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects_dict_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process incoming object detections from Redis&quot;&quot;&quot;</span>
    <span class="c1"># Convert dictionaries back to Object instances</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="n">Objects</span><span class="o">.</span><span class="n">dict_list_to_objects</span><span class="p">(</span><span class="n">objects_dict_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_workspace</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

    <span class="c1"># Now work with Object instances as before</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received object: </span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">label</span><span class="p">()</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">xy_com</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.move2observation_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>The robot will move to a pose where it can observe (the gripper hovers over) the workspace given by workspace_id.
Before a robot can pick up or place an object in a workspace, it must first move to this observation pose of the corresponding workspace.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">move2observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The robot will move to a pose where it can observe (the gripper hovers over) the workspace given by workspace_id.</span>
<span class="sd">    Before a robot can pick up or place an object in a workspace, it must first move to this observation pose of the corresponding workspace.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: id of the workspace</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.pick_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pick_object</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">,</span> <span class="n">z_offset</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Command the pick-and-place robot arm to pick up a specific object using its gripper. The gripper will move to
the specified 'pick_coordinate' and pick the named object.</p>
<p>Example call:</p>
<p>robot.pick_object("pen", [0.01, -0.15])
--&gt; Picks the pen that is located at world coordinates [0.01, -0.15].</p>
<p>robot.pick_object("pen", [0.01, -0.15], z_offset=0.02)
--&gt; Picks the pen with a 2cm offset above its detected position (useful for stacked objects).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>object_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the object to be picked up. Ensure this name matches an object visible in</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pick_coordinate</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The world coordinates [x, y] where the object should be picked up. Use these</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>z_offset</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional height offset in meters to apply when picking (default: 0.001).</p>
              </div>
            </td>
            <td>
                  <code>0.001</code>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns:
    bool: True</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pick_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">z_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Command the pick-and-place robot arm to pick up a specific object using its gripper. The gripper will move to</span>
<span class="sd">    the specified &#39;pick_coordinate&#39; and pick the named object.</span>

<span class="sd">    Example call:</span>

<span class="sd">    robot.pick_object(&quot;pen&quot;, [0.01, -0.15])</span>
<span class="sd">    --&gt; Picks the pen that is located at world coordinates [0.01, -0.15].</span>

<span class="sd">    robot.pick_object(&quot;pen&quot;, [0.01, -0.15], z_offset=0.02)</span>
<span class="sd">    --&gt; Picks the pen with a 2cm offset above its detected position (useful for stacked objects).</span>

<span class="sd">    Args:</span>
<span class="sd">        object_name (str): The name of the object to be picked up. Ensure this name matches an object visible in</span>
<span class="sd">        the robot&#39;s workspace.</span>
<span class="sd">        pick_coordinate (List): The world coordinates [x, y] where the object should be picked up. Use these</span>
<span class="sd">        coordinates to identify the object&#39;s exact position.</span>
<span class="sd">        z_offset (float): Additional height offset in meters to apply when picking (default: 0.001).</span>
<span class="sd">        Useful for picking objects that are stacked on top of other objects.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">coords_str</span> <span class="o">=</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pick_coordinate</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Going to pick </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> at coordinate </span><span class="si">{</span><span class="n">coords_str</span><span class="si">}</span><span class="s2">.&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">oralcom_call_text2speech_async</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

    <span class="n">obj_to_pick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nearest_object</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">obj_to_pick</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="o">=</span> <span class="n">obj_to_pick</span>

        <span class="c1"># Apply z_offset to the pick pose</span>
        <span class="n">pick_pose</span> <span class="o">=</span> <span class="n">obj_to_pick</span><span class="o">.</span><span class="n">pose_com</span><span class="p">()</span>
        <span class="n">pick_pose</span> <span class="o">=</span> <span class="n">pick_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="n">z_offset</span><span class="p">)</span>

        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_pick_object</span><span class="p">(</span><span class="n">pick_pose</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># thread_oral.join()</span>

    <span class="k">return</span> <span class="n">success</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.pick_object_from_workspace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pick_object_from_workspace</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">,</span> <span class="n">z_offset</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Pick an object from a specific workspace.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>object_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the object to pick</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pick_coordinate</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>[x, y] coordinate in workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>z_offset</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional height offset in meters (default: 0.001)</p>
              </div>
            </td>
            <td>
                  <code>0.001</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if successful</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pick_object_from_workspace</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">z_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pick an object from a specific workspace.</span>

<span class="sd">    Args:</span>
<span class="sd">        object_name: Name of the object to pick</span>
<span class="sd">        workspace_id: ID of the workspace</span>
<span class="sd">        pick_coordinate: [x, y] coordinate in workspace</span>
<span class="sd">        z_offset: Additional height offset in meters (default: 0.001)</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">coords_str</span> <span class="o">=</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pick_coordinate</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Picking </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> from workspace </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">coords_str</span><span class="si">}</span><span class="s2">.&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">oralcom_call_text2speech_async</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

    <span class="c1"># Get object from specific workspace memory</span>
    <span class="n">obj_to_pick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nearest_object_in_workspace</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">obj_to_pick</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="o">=</span> <span class="n">obj_to_pick</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_object_source_workspace</span> <span class="o">=</span> <span class="n">workspace_id</span>

        <span class="c1"># Apply z_offset to the pick pose</span>
        <span class="n">pick_pose</span> <span class="o">=</span> <span class="n">obj_to_pick</span><span class="o">.</span><span class="n">pose_com</span><span class="p">()</span>
        <span class="n">pick_pose</span> <span class="o">=</span> <span class="n">pick_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="n">z_offset</span><span class="p">)</span>

        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_pick_object</span><span class="p">(</span><span class="n">pick_pose</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># thread_oral.join()</span>
    <span class="k">return</span> <span class="n">success</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.pick_place_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pick_place_object</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z_offset</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Instructs the pick-and-place robot arm to pick a specific object and place it using its gripper.
The gripper will move to the specified 'pick_coordinate' and pick the named object. It will then move to the
specified 'place_coordinate' and place the object there. If you need to pick-and-place an object, call this
function and not robot_pick_object() followed by robot_place_object().</p>
<p>Example call:</p>
<p>robot.pick_place_object(
    object_name='chocolate bar',
    pick_coordinate=[-0.1, 0.01],
    place_coordinate=[0.1, 0.11],
    location=Location.RIGHT_NEXT_TO
)
--&gt; Picks the chocolate bar that is located at world coordinates [-0.1, 0.01] and places it right next to an
object that exists at world coordinate [0.1, 0.11].</p>
<p>robot.pick_place_object(
    object_name='cube',
    pick_coordinate=[0.2, 0.05],
    place_coordinate=[0.3, 0.1],
    location=Location.ON_TOP_OF,
    z_offset=0.02
)
--&gt; Picks the cube with a 2cm z-offset (useful if it's on top of another object).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>object_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the object to be picked up. Ensure this name matches an object visible in</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pick_coordinate</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The world coordinates [x, y] where the object should be picked up. Use these</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>place_coordinate</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The world coordinates [x, y] where the object should be placed at.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>location</code>
            </td>
            <td>
                  <code><span title="robot_environment.robot.robot_api.Location">Location</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Specifies the relative placement position of the picked object with respect to an object</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>being at the &#39;place_coordinate&#39;. Possible values are defined in the `Location` Enum</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li><code>Location.LEFT_NEXT_TO</code>: Left of the reference object.</li>
<li><code>Location.RIGHT_NEXT_TO</code>: Right of the reference object.</li>
<li><code>Location.ABOVE</code>: Above the reference object.</li>
<li><code>Location.BELOW</code>: Below the reference object.</li>
<li><code>Location.ON_TOP_OF</code>: On top of the reference object.</li>
<li><code>Location.INSIDE</code>: Inside the reference object.</li>
<li><code>Location.NONE</code>: No specific location relative to another object.</li>
</ul>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>z_offset</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional height offset in meters to apply when picking (default: 0.001).</p>
              </div>
            </td>
            <td>
                  <code>0.001</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if successful</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pick_place_object</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">pick_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
    <span class="n">place_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
    <span class="n">location</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">z_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instructs the pick-and-place robot arm to pick a specific object and place it using its gripper.</span>
<span class="sd">    The gripper will move to the specified &#39;pick_coordinate&#39; and pick the named object. It will then move to the</span>
<span class="sd">    specified &#39;place_coordinate&#39; and place the object there. If you need to pick-and-place an object, call this</span>
<span class="sd">    function and not robot_pick_object() followed by robot_place_object().</span>

<span class="sd">    Example call:</span>

<span class="sd">    robot.pick_place_object(</span>
<span class="sd">        object_name=&#39;chocolate bar&#39;,</span>
<span class="sd">        pick_coordinate=[-0.1, 0.01],</span>
<span class="sd">        place_coordinate=[0.1, 0.11],</span>
<span class="sd">        location=Location.RIGHT_NEXT_TO</span>
<span class="sd">    )</span>
<span class="sd">    --&gt; Picks the chocolate bar that is located at world coordinates [-0.1, 0.01] and places it right next to an</span>
<span class="sd">    object that exists at world coordinate [0.1, 0.11].</span>

<span class="sd">    robot.pick_place_object(</span>
<span class="sd">        object_name=&#39;cube&#39;,</span>
<span class="sd">        pick_coordinate=[0.2, 0.05],</span>
<span class="sd">        place_coordinate=[0.3, 0.1],</span>
<span class="sd">        location=Location.ON_TOP_OF,</span>
<span class="sd">        z_offset=0.02</span>
<span class="sd">    )</span>
<span class="sd">    --&gt; Picks the cube with a 2cm z-offset (useful if it&#39;s on top of another object).</span>

<span class="sd">    Args:</span>
<span class="sd">        object_name (str): The name of the object to be picked up. Ensure this name matches an object visible in</span>
<span class="sd">        the robot&#39;s workspace.</span>
<span class="sd">        pick_coordinate (List): The world coordinates [x, y] where the object should be picked up. Use these</span>
<span class="sd">        coordinates to identify the object&#39;s exact position.</span>
<span class="sd">        place_coordinate (List): The world coordinates [x, y] where the object should be placed at.</span>
<span class="sd">        location (Location): Specifies the relative placement position of the picked object with respect to an object</span>
<span class="sd">        being at the &#39;place_coordinate&#39;. Possible values are defined in the `Location` Enum:</span>
<span class="sd">            - `Location.LEFT_NEXT_TO`: Left of the reference object.</span>
<span class="sd">            - `Location.RIGHT_NEXT_TO`: Right of the reference object.</span>
<span class="sd">            - `Location.ABOVE`: Above the reference object.</span>
<span class="sd">            - `Location.BELOW`: Below the reference object.</span>
<span class="sd">            - `Location.ON_TOP_OF`: On top of the reference object.</span>
<span class="sd">            - `Location.INSIDE`: Inside the reference object.</span>
<span class="sd">            - `Location.NONE`: No specific location relative to another object.</span>
<span class="sd">        z_offset (float): Additional height offset in meters to apply when picking (default: 0.001).</span>
<span class="sd">        Useful for picking objects that are stacked on top of other objects.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_object</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">,</span> <span class="n">z_offset</span><span class="o">=</span><span class="n">z_offset</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
        <span class="n">place_success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">place_object</span><span class="p">(</span><span class="n">place_coordinate</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">place_success</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.pick_place_object_across_workspaces" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pick_place_object_across_workspaces</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">pick_workspace_id</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">,</span> <span class="n">place_workspace_id</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z_offset</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Pick an object from one workspace and place it in another workspace.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>object_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the object to pick</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pick_workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the workspace to pick from</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pick_coordinate</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>[x, y] coordinate in pick workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>place_workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the workspace to place in</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>place_coordinate</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>[x, y] coordinate in place workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>location</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[&#39;Location&#39;, <span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Relative placement location (Location enum or string)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>z_offset</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional height offset in meters when picking (default: 0.001)</p>
              </div>
            </td>
            <td>
                  <code>0.001</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if successful, False otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>robot.pick_place_object_across_workspaces(
    object_name='cube',
    pick_workspace_id='niryo_ws_left',
    pick_coordinate=[0.2, 0.05],
    place_workspace_id='niryo_ws_right',
    place_coordinate=[0.25, -0.05],
    location=Location.RIGHT_NEXT_TO,
    z_offset=0.02
)</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pick_place_object_across_workspaces</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">pick_workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">pick_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
    <span class="n">place_workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">place_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
    <span class="n">location</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">z_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pick an object from one workspace and place it in another workspace.</span>

<span class="sd">    Args:</span>
<span class="sd">        object_name: Name of the object to pick</span>
<span class="sd">        pick_workspace_id: ID of the workspace to pick from</span>
<span class="sd">        pick_coordinate: [x, y] coordinate in pick workspace</span>
<span class="sd">        place_workspace_id: ID of the workspace to place in</span>
<span class="sd">        place_coordinate: [x, y] coordinate in place workspace</span>
<span class="sd">        location: Relative placement location (Location enum or string)</span>
<span class="sd">        z_offset: Additional height offset in meters when picking (default: 0.001)</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if successful, False otherwise</span>

<span class="sd">    Example:</span>
<span class="sd">        robot.pick_place_object_across_workspaces(</span>
<span class="sd">            object_name=&#39;cube&#39;,</span>
<span class="sd">            pick_workspace_id=&#39;niryo_ws_left&#39;,</span>
<span class="sd">            pick_coordinate=[0.2, 0.05],</span>
<span class="sd">            place_workspace_id=&#39;niryo_ws_right&#39;,</span>
<span class="sd">            place_coordinate=[0.25, -0.05],</span>
<span class="sd">            location=Location.RIGHT_NEXT_TO,</span>
<span class="sd">            z_offset=0.02</span>
<span class="sd">        )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Multi-workspace operation: </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Pick from: </span><span class="si">{</span><span class="n">pick_workspace_id</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">pick_coordinate</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Place in: </span><span class="si">{</span><span class="n">place_workspace_id</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">place_coordinate</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Step 1: Move to pick workspace observation pose</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">pick_workspace_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="n">pick_workspace_id</span>

    <span class="c1"># Step 2: Pick the object</span>
    <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_object_from_workspace</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">pick_workspace_id</span><span class="p">,</span> <span class="n">pick_coordinate</span><span class="p">,</span> <span class="n">z_offset</span><span class="o">=</span><span class="n">z_offset</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to pick </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">pick_workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Step 3: Move to place workspace observation pose</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">place_workspace_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">_current_workspace_id</span> <span class="o">=</span> <span class="n">place_workspace_id</span>

    <span class="c1"># Step 4: Place the object</span>
    <span class="n">place_success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">place_object_in_workspace</span><span class="p">(</span><span class="n">place_workspace_id</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">place_success</span><span class="p">:</span>
        <span class="c1"># Update memory: remove from source, add to target</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">update_object_in_workspace</span><span class="p">(</span>
            <span class="n">source_workspace_id</span><span class="o">=</span><span class="n">pick_workspace_id</span><span class="p">,</span>
            <span class="n">target_workspace_id</span><span class="o">=</span><span class="n">place_workspace_id</span><span class="p">,</span>
            <span class="n">object_label</span><span class="o">=</span><span class="n">object_name</span><span class="p">,</span>
            <span class="n">old_coordinate</span><span class="o">=</span><span class="n">pick_coordinate</span><span class="p">,</span>
            <span class="n">new_coordinate</span><span class="o">=</span><span class="n">place_coordinate</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully moved </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">pick_workspace_id</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">place_workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">place_success</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.place_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">place_object</span><span class="p">(</span><span class="n">place_coordinate</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Instruct the pick-and-place robot arm to place a picked object at the specified 'place_coordinate'. The
function moves the gripper to the specified 'place_coordinate' and calculates the exact placement position from
the given 'location'. Before calling this function you have to call robot_pick_object() to pick an object.</p>
<p>Example call:</p>
<p>robot.place_object([0.2, 0.0], "left next to")
--&gt; Places the already gripped object left next to the world coordinate [0.2, 0.0].</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>place_coordinate</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The world coordinates [x, y] of the target object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>location</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Specifies the relative placement position of the picked object in relation to an object</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>being at the &#39;place_coordinate&#39;. Possible positions</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>'left next to', 'right next to', 'above', 'below',</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns:
    bool: True</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">place_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">location</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instruct the pick-and-place robot arm to place a picked object at the specified &#39;place_coordinate&#39;. The</span>
<span class="sd">    function moves the gripper to the specified &#39;place_coordinate&#39; and calculates the exact placement position from</span>
<span class="sd">    the given &#39;location&#39;. Before calling this function you have to call robot_pick_object() to pick an object.</span>

<span class="sd">    Example call:</span>

<span class="sd">    robot.place_object([0.2, 0.0], &quot;left next to&quot;)</span>
<span class="sd">    --&gt; Places the already gripped object left next to the world coordinate [0.2, 0.0].</span>

<span class="sd">    Args:</span>
<span class="sd">        place_coordinate: The world coordinates [x, y] of the target object.</span>
<span class="sd">        location (str): Specifies the relative placement position of the picked object in relation to an object</span>
<span class="sd">        being at the &#39;place_coordinate&#39;. Possible positions: &#39;left next to&#39;, &#39;right next to&#39;, &#39;above&#39;, &#39;below&#39;,</span>
<span class="sd">        &#39;on top of&#39;, &#39;inside&#39;, or None. Set to None, if there is no location given in the task.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">location</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">convert_str2location</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="p">:</span>
        <span class="n">old_coordinate</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">x_com</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">y_com</span><span class="p">()]</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Going to place </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">label</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> coordinate [&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">].&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">old_coordinate</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Going to place it </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> coordinate [</span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">].&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">oralcom_call_text2speech_async</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
    <span class="n">obj_where_to_place</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">Location</span><span class="o">.</span><span class="n">NONE</span><span class="p">:</span>
        <span class="n">obj_where_to_place</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nearest_object</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj_where_to_place</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">place_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.09</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">place_pose</span> <span class="o">=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">pose_center</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">place_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.09</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;place_object: </span><span class="si">{</span><span class="n">place_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">x_off</span> <span class="o">=</span> <span class="mf">0.02</span>
    <span class="n">y_off</span> <span class="o">=</span> <span class="mf">0.02</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="p">:</span>
        <span class="n">x_off</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">y_off</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="k">if</span> <span class="n">place_pose</span><span class="p">:</span>
        <span class="c1"># TODO: use height of object instead</span>
        <span class="k">if</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">ON_TOP_OF</span><span class="p">:</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">z</span> <span class="o">+=</span> <span class="mf">0.02</span>
        <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">INSIDE</span><span class="p">:</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">z</span> <span class="o">+=</span> <span class="mf">0.01</span>
        <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">RIGHT_NEXT_TO</span><span class="p">:</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y_off</span>
        <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">LEFT_NEXT_TO</span><span class="p">:</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y_off</span>
        <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">BELOW</span><span class="p">:</span>
            <span class="c1"># print(obj_where_to_place.height_m(), self._object_last_picked.width_m(), x_off)</span>
            <span class="c1"># TODO: nutze hier auch width, da width immer die grere gre ist und nicht eine koordinatenrichtugn hat</span>
            <span class="c1">#  ich muss anstatt width und height eine gre haben dim_x und dim_y, die a x und y koordinate gebunden sind</span>
            <span class="c1">#  ich habe das in object klasse repariert, width geht immer entlang y-achse jetzt. prfen hier</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">x_off</span>
        <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">ABOVE</span><span class="p">:</span>
            <span class="c1"># TODO: nutze hier auch width, da width immer die grere gre ist und nicht eine koordinatenrichtugn hat</span>
            <span class="c1">#  ich habe das in object klasse repariert, width geht immer entlang y-achse jetzt. prfen hier</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">height_m</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">width_m</span><span class="p">(),</span> <span class="n">x_off</span><span class="p">)</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">x_off</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">place_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">location</span> <span class="ow">is</span> <span class="n">Location</span><span class="o">.</span><span class="n">NONE</span> <span class="ow">or</span> <span class="n">location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># I do not have to do anything as the given location is where to place the object</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown location: </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> (type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">location</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_place_object</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span>

        <span class="c1"># update position of placed object to the new position</span>
        <span class="c1"># Update memory after successful placement</span>
        <span class="k">if</span> <span class="n">success</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="ow">and</span> <span class="n">old_coordinate</span><span class="p">:</span>
            <span class="n">final_coordinate</span> <span class="o">=</span> <span class="p">[</span><span class="n">place_pose</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">place_pose</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;final_coordinate: </span><span class="si">{</span><span class="n">final_coordinate</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">update_object_in_memory</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">label</span><span class="p">(),</span> <span class="n">old_coordinate</span><span class="p">,</span> <span class="n">new_pose</span><span class="o">=</span><span class="n">place_pose</span>
            <span class="p">)</span>

            <span class="c1"># Give the memory system a moment to register the update</span>
            <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># thread_oral.join()</span>

    <span class="k">return</span> <span class="n">success</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.place_object_in_workspace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">place_object_in_workspace</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Place a picked object in a specific workspace.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the target workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>place_coordinate</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>[x, y] coordinate in workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>location</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[&#39;Location&#39;, <span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Relative placement location</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if successful</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">place_object_in_workspace</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">location</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Place a picked object in a specific workspace.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: ID of the target workspace</span>
<span class="sd">        place_coordinate: [x, y] coordinate in workspace</span>
<span class="sd">        location: Relative placement location</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">location</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">convert_str2location</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Placing </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">label</span><span class="p">()</span><span class="si">}</span><span class="s2"> in workspace &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> coordinate &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">].&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Placing object in workspace </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;coordinate [</span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">].&quot;</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">oralcom_call_text2speech_async</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

    <span class="c1"># Get workspace for coordinate transformation</span>
    <span class="n">workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Workspace </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
        <span class="c1"># thread_oral.join()</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Find reference object in target workspace if location specified</span>
    <span class="n">obj_where_to_place</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">Location</span><span class="o">.</span><span class="n">NONE</span><span class="p">:</span>
        <span class="n">obj_where_to_place</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nearest_object_in_workspace</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">,</span> <span class="n">place_coordinate</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">obj_where_to_place</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">place_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.09</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">place_pose</span> <span class="o">=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">pose_center</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">place_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="n">place_coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">place_coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.09</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

    <span class="c1"># Calculate placement offset based on location</span>
    <span class="k">if</span> <span class="n">place_pose</span> <span class="ow">and</span> <span class="n">obj_where_to_place</span><span class="p">:</span>
        <span class="n">x_off</span> <span class="o">=</span> <span class="mf">0.02</span>
        <span class="n">y_off</span> <span class="o">=</span> <span class="mf">0.02</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="p">:</span>
            <span class="n">x_off</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">y_off</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">ON_TOP_OF</span><span class="p">:</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">z</span> <span class="o">+=</span> <span class="mf">0.02</span>
        <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">INSIDE</span><span class="p">:</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">z</span> <span class="o">+=</span> <span class="mf">0.01</span>
        <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">RIGHT_NEXT_TO</span><span class="p">:</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y_off</span>
        <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">LEFT_NEXT_TO</span><span class="p">:</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y_off</span>
        <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">BELOW</span><span class="p">:</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">x_off</span>
        <span class="k">elif</span> <span class="n">location</span> <span class="o">==</span> <span class="n">Location</span><span class="o">.</span><span class="n">ABOVE</span><span class="p">:</span>
            <span class="n">place_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">obj_where_to_place</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">x_off</span>

    <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_place_object</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span>

    <span class="c1"># Clear last picked object</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_object_last_picked</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s2">&quot;_object_source_workspace&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_object_source_workspace</span>

    <span class="c1"># thread_oral.join()</span>
    <span class="k">return</span> <span class="n">success</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.push_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">push_object</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">push_coordinate</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Instruct the pick-and-place robot arm to push a specific object to a new position.
This function should only be called if it is not possible to pick the object.
An object cannot be picked if its shorter side is larger than the gripper.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>object_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the object to be pushed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>push_coordinate</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The world coordinates [x, y] where the object to push is located.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>direction</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The direction in which to push the object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Valid options are</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>"up", "down", "left", "right".</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>distance</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The distance (in millimeters) to push the object in the specified direction.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">push_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">push_coordinate</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instruct the pick-and-place robot arm to push a specific object to a new position.</span>
<span class="sd">    This function should only be called if it is not possible to pick the object.</span>
<span class="sd">    An object cannot be picked if its shorter side is larger than the gripper.</span>

<span class="sd">    Args:</span>
<span class="sd">        object_name (str): The name of the object to be pushed.</span>
<span class="sd">        Ensure the name matches an object in the robot&#39;s environment.</span>
<span class="sd">        push_coordinate: The world coordinates [x, y] where the object to push is located.</span>
<span class="sd">        These coordinates indicate the initial position of the object.</span>
<span class="sd">        direction (str): The direction in which to push the object.</span>
<span class="sd">        Valid options are: &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, &quot;right&quot;.</span>
<span class="sd">        distance: The distance (in millimeters) to push the object in the specified direction.</span>
<span class="sd">        Ensure the value is within the robot&#39;s operating range.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Calling push with </span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">oralcom_call_text2speech_async</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

    <span class="n">obj_to_push</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nearest_object</span><span class="p">(</span><span class="n">object_name</span><span class="p">,</span> <span class="n">push_coordinate</span><span class="p">)</span>

    <span class="n">push_pose</span> <span class="o">=</span> <span class="n">obj_to_push</span><span class="o">.</span><span class="n">pose_com</span><span class="p">()</span>

    <span class="c1"># it is certainly better when pushing up to move under the object with a closed gripper so we can</span>
    <span class="c1">#  actually push up. same for the other directions.</span>
    <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;up&quot;</span><span class="p">:</span>
        <span class="n">push_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">obj_to_push</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="c1"># gripper 90 rotated. TODO: I have to test these orientations</span>
        <span class="n">push_pose</span><span class="o">.</span><span class="n">yaw</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;down&quot;</span><span class="p">:</span>
        <span class="n">push_pose</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">obj_to_push</span><span class="o">.</span><span class="n">height_m</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="c1"># gripper 90 rotated. TODO: I have to test these orientations</span>
        <span class="n">push_pose</span><span class="o">.</span><span class="n">yaw</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
        <span class="n">push_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">obj_to_push</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="c1"># gripper 0 rotated. TODO: I have to test these orientations</span>
        <span class="n">push_pose</span><span class="o">.</span><span class="n">yaw</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
        <span class="n">push_pose</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">obj_to_push</span><span class="o">.</span><span class="n">width_m</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="c1"># gripper 0 rotated. TODO: I have to test these orientations</span>
        <span class="n">push_pose</span><span class="o">.</span><span class="n">yaw</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown direction: </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">obj_to_push</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">robot_push_object</span><span class="p">(</span><span class="n">push_pose</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># thread_oral.join()</span>

    <span class="k">return</span> <span class="n">success</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.robot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>RobotController</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="robot_environment.robot.robot_controller.RobotController" href="#robot_environment.robot.robot_controller.RobotController">RobotController</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>object that controls the robot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">robot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RobotController</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns:</span>
<span class="sd">        RobotController: object that controls the robot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.robot_in_motion" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_in_motion</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>:return: value of _robot_in_motion:
False: robot is not in motion
True: robot is in motion and therefore maybe cannot see the workspace markers</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">robot_in_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :return: value of _robot_in_motion:</span>
<span class="sd">    False: robot is not in motion</span>
<span class="sd">    True: robot is in motion and therefore maybe cannot see the workspace markers</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">is_in_motion</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot.Robot.verbose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verbose</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Returns: True, if verbose is on, else False</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns: True, if verbose is on, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="controllers">Controllers</h2>
<h3 id="robotcontroller">RobotController</h3>


<div class="doc doc-object doc-class">



<h2 id="robot_environment.robot.robot_controller.RobotController" class="doc doc-heading">
            <code>robot_environment.robot.robot_controller.RobotController</code>


</h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>



        <p>An abstract class for the pick-and-place robot that provides the primitive tasks of the robot like
pick and place operations.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RobotController</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An abstract class for the pick-and-place robot that provides the primitive tasks of the robot like</span>
<span class="sd">    pick and place operations.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># *** CONSTRUCTORS ***</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">:</span> <span class="s2">&quot;Robot&quot;</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the robot (connects to it and calibrates it).</span>

<span class="sd">        Args:</span>
<span class="sd">            robot: object of the Robot class.</span>
<span class="sd">            use_simulation: True, if working with a simulation model of the robot,</span>
<span class="sd">            else False if we work with a real robot.</span>
<span class="sd">            verbose:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="c1"># Initialize the asyncio lock</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>  <span class="c1"># asyncio.Lock()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span> <span class="o">=</span> <span class="n">robot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_in_motion</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_init_robot</span><span class="p">(</span><span class="n">use_simulation</span><span class="p">)</span>

    <span class="c1"># Deleting (Calling destructor)</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="c1"># *** PUBLIC SET methods ***</span>

    <span class="c1"># *** PUBLIC GET methods ***</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current pose of gripper of robot.</span>

<span class="sd">        Returns:</span>
<span class="sd">            current pose of gripper of robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="c1"># *** PUBLIC methods ***</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">calibrate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calibrates the Robot.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if calibration was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="c1"># TODO: also possible to only pass PoseObject of the object. The advantage of passing Object might be</span>
    <span class="c1">#  that an object has more then one pick position. then robot can try and pick at a few positions.</span>
    <span class="c1"># @abstractmethod</span>
    <span class="c1"># def robot_pick_object(self, obj2pick: &quot;Object&quot;) -&gt; bool:</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Calls the pick command of the self._robot_ctrl to pick the given Object</span>
    <span class="c1">#</span>
    <span class="c1">#     Args:</span>
    <span class="c1">#         obj2pick: Object that shall be picked</span>
    <span class="c1">#</span>
    <span class="c1">#     Returns:</span>
    <span class="c1">#         True, if pick was successful, else False</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     return False</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">robot_pick_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pick_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls the pick command of the self._robot_ctrl to pick an object at the given pose.</span>

<span class="sd">        Args:</span>
<span class="sd">            pick_pose: Pose where the object should be picked (includes z-offset if needed)</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if pick was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">robot_place_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">place_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Places an already picked object at the given place_pose.</span>

<span class="sd">        Args:</span>
<span class="sd">            place_pose: Pose where to place the already picked object</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if place was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">robot_push_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">push_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Push given object (its Pose) into the given direction by the given distance.</span>

<span class="sd">        Args:</span>
<span class="sd">            push_pose: the Pose of the object that should be pushed.</span>
<span class="sd">            direction: &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, &quot;right&quot;</span>
<span class="sd">            distance: distance in millimeters</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if push was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_target_pose_from_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">yaw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),</span>
<span class="sd">        calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the</span>
<span class="sd">        given coordinate an object that has the given orientation. For this method to work, it is important that</span>
<span class="sd">        only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot</span>
<span class="sd">        this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: id of the workspace</span>
<span class="sd">            u_rel: horizontal coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">            v_rel: vertical coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">            yaw: orientation of an object at the pixel coordinates [u_rel, v_rel].</span>

<span class="sd">        Returns:</span>
<span class="sd">            pose_object: Pose of the point in world coordinates of the robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">move2observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The robot should move to a pose where it can observe the workspace given by workspace_id.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: id of the workspace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="c1"># *** PUBLIC STATIC/CLASS GET methods ***</span>

    <span class="c1"># *** PRIVATE methods ***</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_init_robot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Code to initialize the robot. After calling this method the robot should be ready to receive commands.</span>

<span class="sd">        Args:</span>
<span class="sd">            use_simulation: True, if working with a simulation model of the robot,</span>
<span class="sd">            else False if we work with a real robot.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True, if initialization was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_in_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_motion</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the robot motion state.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_in_motion</span> <span class="o">=</span> <span class="n">in_motion</span>
        <span class="c1"># if hasattr(self._robot, &quot;_robot_in_motion&quot;):</span>
        <span class="c1">#     self._robot._robot_in_motion = in_motion</span>

    <span class="c1"># *** PUBLIC properties ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_in_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if robot is currently in motion.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_in_motion</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">robot_ctrl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            the object of the underlying robot. For the Niryo Ned2 it is an object of the NiryoRobot class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">robot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Robot&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">lock</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            a lock, to only call the robot interface with one method and not many methods in parallel, because for Niryo</span>
<span class="sd">            the interface is not thread safe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Returns: True, if verbose is on, else False</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span>

    <span class="c1"># *** PRIVATE variables ***</span>

    <span class="c1"># the object of the underlying robot. For the Niryo Ned2 it is an object of the NiryoRobot class.</span>
    <span class="n">_robot_ctrl</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># object of the Robot class</span>
    <span class="n">_robot</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># a lock, to only call the robot interface with one method and not many methods in parallel, because for Niryo</span>
    <span class="c1"># the interface is not thread safe.</span>
    <span class="n">_lock</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_verbose</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">








<h3 id="robot_environment.robot.robot_controller.RobotController-functions">Functions</h3>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initializes the robot (connects to it and calibrates it).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>robot</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="robot_environment.robot.robot.Robot" href="#robot_environment.robot.robot.Robot">Robot</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>object of the Robot class.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>use_simulation</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if working with a simulation model of the robot,</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">:</span> <span class="s2">&quot;Robot&quot;</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the robot (connects to it and calibrates it).</span>

<span class="sd">    Args:</span>
<span class="sd">        robot: object of the Robot class.</span>
<span class="sd">        use_simulation: True, if working with a simulation model of the robot,</span>
<span class="sd">        else False if we work with a real robot.</span>
<span class="sd">        verbose:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="c1"># Initialize the asyncio lock</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>  <span class="c1"># asyncio.Lock()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span> <span class="o">=</span> <span class="n">verbose</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span> <span class="o">=</span> <span class="n">robot</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_in_motion</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_init_robot</span><span class="p">(</span><span class="n">use_simulation</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.calibrate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calibrate</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Calibrates the Robot.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if calibration was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calibrate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calibrates the Robot.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if calibration was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.get_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pose</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get current pose of gripper of robot.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>current pose of gripper of robot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get current pose of gripper of robot.</span>

<span class="sd">    Returns:</span>
<span class="sd">        current pose of gripper of robot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.get_target_pose_from_rel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),
calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the
given coordinate an object that has the given orientation. For this method to work, it is important that
only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot
this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>u_rel</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>horizontal coordinate in image of workspace, normalized between 0 and 1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>v_rel</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>vertical coordinate in image of workspace, normalized between 0 and 1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>yaw</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>orientation of an object at the pixel coordinates [u_rel, v_rel].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>pose_object</code></td>            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pose of the point in world coordinates of the robot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_target_pose_from_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">yaw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),</span>
<span class="sd">    calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the</span>
<span class="sd">    given coordinate an object that has the given orientation. For this method to work, it is important that</span>
<span class="sd">    only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot</span>
<span class="sd">    this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: id of the workspace</span>
<span class="sd">        u_rel: horizontal coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">        v_rel: vertical coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">        yaw: orientation of an object at the pixel coordinates [u_rel, v_rel].</span>

<span class="sd">    Returns:</span>
<span class="sd">        pose_object: Pose of the point in world coordinates of the robot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.is_in_motion" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_in_motion</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Check if robot is currently in motion.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_in_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if robot is currently in motion.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_in_motion</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.lock" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">lock</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="threading.Lock">Lock</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a lock, to only call the robot interface with one method and not many methods in parallel, because for Niryo</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="threading.Lock">Lock</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the interface is not thread safe.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">lock</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        a lock, to only call the robot interface with one method and not many methods in parallel, because for Niryo</span>
<span class="sd">        the interface is not thread safe.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.move2observation_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>The robot should move to a pose where it can observe the workspace given by workspace_id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">move2observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The robot should move to a pose where it can observe the workspace given by workspace_id.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: id of the workspace</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.robot_ctrl" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_ctrl</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the object of the underlying robot. For the Niryo Ned2 it is an object of the NiryoRobot class.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">robot_ctrl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        the object of the underlying robot. For the Niryo Ned2 it is an object of the NiryoRobot class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.robot_pick_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_pick_object</span><span class="p">(</span><span class="n">pick_pose</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Calls the pick command of the self._robot_ctrl to pick an object at the given pose.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pick_pose</code>
            </td>
            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pose where the object should be picked (includes z-offset if needed)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if pick was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">robot_pick_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pick_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls the pick command of the self._robot_ctrl to pick an object at the given pose.</span>

<span class="sd">    Args:</span>
<span class="sd">        pick_pose: Pose where the object should be picked (includes z-offset if needed)</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if pick was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.robot_place_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_place_object</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Places an already picked object at the given place_pose.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>place_pose</code>
            </td>
            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pose where to place the already picked object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if place was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">robot_place_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">place_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Places an already picked object at the given place_pose.</span>

<span class="sd">    Args:</span>
<span class="sd">        place_pose: Pose where to place the already picked object</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if place was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.robot_push_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_push_object</span><span class="p">(</span><span class="n">push_pose</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Push given object (its Pose) into the given direction by the given distance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>push_pose</code>
            </td>
            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the Pose of the object that should be pushed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>direction</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>"up", "down", "left", "right"</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>distance</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>distance in millimeters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if push was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">robot_push_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">push_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Push given object (its Pose) into the given direction by the given distance.</span>

<span class="sd">    Args:</span>
<span class="sd">        push_pose: the Pose of the object that should be pushed.</span>
<span class="sd">        direction: &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, &quot;right&quot;</span>
<span class="sd">        distance: distance in millimeters</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if push was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.robot_controller.RobotController.verbose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verbose</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Returns: True, if verbose is on, else False</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Returns: True, if verbose is on, else False</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="niryorobotcontroller">NiryoRobotController</h3>


<div class="doc doc-object doc-class">



<h2 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController" class="doc doc-heading">
            <code>robot_environment.robot.niryo_robot_controller.NiryoRobotController</code>


</h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="robot_environment.robot.robot_controller.RobotController" href="#robot_environment.robot.robot_controller.RobotController">RobotController</a></code></p>



        <p>Class for the pick-and-place niryo ned2 robot that provides the primitive tasks of the robot like
pick and place operations.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>robot_environment/robot/niryo_robot_controller.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">NiryoRobotController</span><span class="p">(</span><span class="n">RobotController</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for the pick-and-place niryo ned2 robot that provides the primitive tasks of the robot like</span>
<span class="sd">    pick and place operations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># *** CONSTRUCTORS ***</span>
    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">:</span> <span class="s2">&quot;Robot&quot;</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the robot (connects to it and calibrates it).</span>

<span class="sd">        Args:</span>
<span class="sd">            robot: object of the Robot class.</span>
<span class="sd">            use_simulation: True, if working with a simulation model of the robot,</span>
<span class="sd">            else False if we work with a real robot.</span>
<span class="sd">            verbose:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shutdown_v</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">get_package_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>

    <span class="c1"># Deleting (Calling destructor)</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__del__</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_executor&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Shutting down ThreadPoolExecutor in destructor...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="o">.</span><span class="n">shutdown</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Destructor called, Robot deleted.&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Destructor called, Robot deleted.2&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shutdown</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Explicit cleanup method - call this when you&#39;re done with the object.</span>
<span class="sd">        This is more reliable than relying on __del__.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_executor&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Shutting down ThreadPoolExecutor...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shutdown_v</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="o">.</span><span class="n">shutdown</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># *** PUBLIC SET methods ***</span>

    <span class="c1"># *** PUBLIC GET methods ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current pose of gripper of robot.</span>

<span class="sd">        Returns:</span>
<span class="sd">            current pose of gripper of robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                <span class="n">pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_niryo_pose_object2pose_object</span><span class="p">(</span><span class="n">pose</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_camera_intrinsics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># all calls of methods of the _robot (NiryoRobot) object are locked, because they are not safe thread</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                <span class="n">mtx</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">vision</span><span class="o">.</span><span class="n">get_camera_intrinsics</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mtx</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">get_camera_intrinsics</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">mtx</span><span class="p">,</span> <span class="n">dist</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_img_compressed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                <span class="n">img_compressed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">vision</span><span class="o">.</span><span class="n">get_img_compressed</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">img_compressed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">get_img_compressed</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">img_compressed</span>

    <span class="c1"># *** PUBLIC methods ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calibrate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calibrates the NiryoRobot.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if calibration was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_calibrate_auto</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the connection to the robot by safely disconnecting and reconnecting.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Resetting the robot connection...&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Attempt to close the connection safely</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_shutdown</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error while closing connection: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Reinitialize the connection</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_create_robot</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Connection successfully reset.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to reconnect to the robot: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">robot_pick_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pick_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls the pick command of the self._robot_ctrl to pick the object at the given pose.</span>

<span class="sd">        Args:</span>
<span class="sd">            pick_pose: Pose where to pick the object (z-offset already applied if needed)</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if pick was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert to Niryo format</span>
        <span class="n">pick_pose_niryo</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_pose_object2niryo_pose_object</span><span class="p">(</span><span class="n">pick_pose</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">pick_place</span><span class="o">.</span><span class="n">pick_from_pose</span><span class="p">(</span><span class="n">pick_pose_niryo</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">pick_from_pose</span><span class="p">(</span><span class="n">pick_pose_niryo</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Finished pick_from_pose&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
            <span class="c1"># TODO: in newest version available</span>
            <span class="c1"># return not self._robot_ctrl.collision_detected</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pick failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">robot_place_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">place_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Places an already picked object at the given place_pose.</span>

<span class="sd">        Args:</span>
<span class="sd">            place_pose: Pose where to place the already picked object</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if place was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">place_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_pose_object2niryo_pose_object</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span>
        <span class="n">place_pose</span> <span class="o">=</span> <span class="n">place_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="mf">0.005</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Place pose: </span><span class="si">{</span><span class="n">place_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">pick_place</span><span class="o">.</span><span class="n">place_from_pose</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">place_from_pose</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span>
            <span class="c1"># TODO: in newest version available</span>
            <span class="c1"># return not self._robot_ctrl.collision_detected</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Place failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">robot_push_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">push_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Push given object (its Pose) into the given direction by the given distance.</span>

<span class="sd">        Args:</span>
<span class="sd">            push_pose: the Pose of the object that should be pushed.</span>
<span class="sd">            direction: &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, &quot;right&quot;</span>
<span class="sd">            distance: distance in millimeters</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if push was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">push_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_pose_object2niryo_pose_object</span><span class="p">(</span><span class="n">push_pose</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Push pose: </span><span class="si">{</span><span class="n">push_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">tool</span><span class="o">.</span><span class="n">close_gripper</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">close_gripper</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_move_pose</span><span class="p">(</span><span class="n">push_pose</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;up&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_shift_pose</span><span class="p">(</span><span class="n">RobotAxis</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;down&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_shift_pose</span><span class="p">(</span><span class="n">RobotAxis</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="o">-</span><span class="n">distance</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_shift_pose</span><span class="p">(</span><span class="n">RobotAxis</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_shift_pose</span><span class="p">(</span><span class="n">RobotAxis</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="o">-</span><span class="n">distance</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown direction: </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span>
            <span class="c1"># TODO: in newest version available</span>
            <span class="c1"># return not self._robot_ctrl.collision_detected</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Push failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_target_pose_from_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">yaw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),</span>
<span class="sd">        calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the</span>
<span class="sd">        given coordinate an object that has the given orientation. For this method to work, it is important that</span>
<span class="sd">        only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot</span>
<span class="sd">        this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: id of the workspace</span>
<span class="sd">            u_rel: horizontal coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">            v_rel: vertical coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">            yaw: orientation of an object at the pixel coordinates [u_rel, v_rel].</span>

<span class="sd">        Returns:</span>
<span class="sd">            pose_object: Pose of the point in world coordinates of the robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">u_rel</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">v_rel</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">yaw</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Use the asyncio lock for thread-safe access</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> acquired lock&quot;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">x_rel</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">u_rel</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
                <span class="n">y_rel</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">v_rel</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>

                <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                    <span class="n">obj_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">vision</span><span class="o">.</span><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">x_rel</span><span class="p">,</span> <span class="n">y_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">obj_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">x_rel</span><span class="p">,</span> <span class="n">y_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span>

                <span class="n">obj_coords</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_niryo_pose_object2pose_object</span><span class="p">(</span><span class="n">obj_coords</span><span class="p">)</span>

            <span class="k">except</span> <span class="p">(</span><span class="n">NiryoRobotException</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">SyntaxError</span><span class="p">,</span> <span class="n">TcpCommandException</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">obj_coords</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> releasing lock&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> exiting: </span><span class="si">{</span><span class="n">obj_coords</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">obj_coords</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_target_pose_from_rel_timeout</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">x_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">yaw</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.75</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> entering: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">x_rel</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y_rel</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">yaw</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> failed to acquire lock within timeout&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">PoseObject</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> acquired lock&quot;</span><span class="p">)</span>
            <span class="n">future</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">get_target_pose_from_rel</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">x_rel</span><span class="p">,</span> <span class="n">y_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">obj_coords</span> <span class="o">=</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">FuturesTimeoutError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> timeout waiting for robot response&quot;</span><span class="p">)</span>
                <span class="c1"># TODO: Ich kann nicht einfach die Verbindung resetten, da ja auch an anderen Orten auf den Roboter</span>
                <span class="c1">#  in threads zugegriffen wird.</span>
                <span class="c1"># self.reset_connection()</span>
                <span class="n">obj_coords</span> <span class="o">=</span> <span class="n">PoseObject</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
                <span class="n">future</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>  <span class="c1"># Attempt to cancel the task if it is still running</span>

        <span class="k">except</span> <span class="p">(</span><span class="n">NiryoRobotException</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">SyntaxError</span><span class="p">,</span> <span class="n">TcpCommandException</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">obj_coords</span> <span class="o">=</span> <span class="n">PoseObject</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> releasing lock&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> exiting: </span><span class="si">{</span><span class="n">obj_coords</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">obj_coords</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_niryo_pose_object2pose_object</span><span class="p">(</span><span class="n">obj_coords</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">obj_coords</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">move2observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The robot moves to a pose where it can observe the workspace given by workspace_id.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: id of the workspace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">observation_pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">observation_pose</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;observation_pose is None for workspace: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Only convert if we have a valid pose</span>
        <span class="n">observation_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_pose_object2niryo_pose_object</span><span class="p">(</span><span class="n">observation_pose</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_move_pose</span><span class="p">(</span><span class="n">observation_pose</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">UnicodeDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;move2observation_pose error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">, pose: </span><span class="si">{</span><span class="n">observation_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;move_pose finished, current: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span><span class="si">}</span><span class="s2">, target: </span><span class="si">{</span><span class="n">observation_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Closes connection to NiryoRobot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
            <span class="c1"># End Robot Connection</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">close_connection</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_shift_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">:</span> <span class="n">RobotAxis</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shifts the gripper along the given axis for the specified distance.</span>

<span class="sd">        Args:</span>
<span class="sd">            axis (RobotAxis): axis of the robot to shift the gripper along</span>
<span class="sd">            distance: distance in meters to shift the gripper along</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">shift_pose</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">distance</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">shift_pose</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">distance</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_move_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose</span><span class="p">:</span> <span class="n">PoseObject</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move gripper of robot to given pose.</span>

<span class="sd">        Args:</span>
<span class="sd">            pose (PoseObject): pose of gripper</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">move_pose</span><span class="p">(</span><span class="n">pose</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">move_pose</span><span class="p">(</span><span class="n">pose</span><span class="p">)</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_create_robot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the NiryoRobot object and calibrates the robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span> <span class="o">=</span> <span class="n">NiryoRobot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_robot_ip_address</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_calibrate_auto</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_calibrate_auto</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calibrates the NiryoRobot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">tool</span><span class="o">.</span><span class="n">update_tool</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">calibrate_auto</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">update_tool</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">calibrate_auto</span><span class="p">()</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_init_robot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the NiryoRobot object and connects to it.</span>

<span class="sd">        Args:</span>
<span class="sd">            use_simulation:</span>

<span class="sd">        Returns:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Connect to Niryo Robot</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">use_simulation</span><span class="p">:</span>
            <span class="n">robot_ip_address</span> <span class="o">=</span> <span class="s2">&quot;192.168.0.140&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">robot_ip_address</span> <span class="o">=</span> <span class="s2">&quot;192.168.247.128&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ip_address</span> <span class="o">=</span> <span class="n">robot_ip_address</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_create_robot</span><span class="p">()</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># *** PUBLIC properties ***</span>

    <span class="c1"># *** PRIVATE variables ***</span>

    <span class="c1"># ip address of the robot</span>
    <span class="n">_robot_ip_address</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">_logger</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">








<h3 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController-functions">Functions</h3>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initializes the robot (connects to it and calibrates it).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>robot</code>
            </td>
            <td>
                  <code>&#39;Robot&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>object of the Robot class.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>use_simulation</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if working with a simulation model of the robot,</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/niryo_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">:</span> <span class="s2">&quot;Robot&quot;</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the robot (connects to it and calibrates it).</span>

<span class="sd">    Args:</span>
<span class="sd">        robot: object of the Robot class.</span>
<span class="sd">        use_simulation: True, if working with a simulation model of the robot,</span>
<span class="sd">        else False if we work with a real robot.</span>
<span class="sd">        verbose:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_shutdown_v</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">get_package_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController.calibrate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calibrate</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Calibrates the NiryoRobot.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if calibration was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/niryo_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calibrate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calibrates the NiryoRobot.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if calibration was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calibrate_auto</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController.cleanup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cleanup</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Explicit cleanup method - call this when you're done with the object.
This is more reliable than relying on <strong>del</strong>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/niryo_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Explicit cleanup method - call this when you&#39;re done with the object.</span>
<span class="sd">    This is more reliable than relying on __del__.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_executor&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Shutting down ThreadPoolExecutor...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shutdown_v</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="o">.</span><span class="n">shutdown</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController.get_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pose</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get current pose of gripper of robot.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>current pose of gripper of robot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/niryo_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get current pose of gripper of robot.</span>

<span class="sd">    Returns:</span>
<span class="sd">        current pose of gripper of robot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
            <span class="n">pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_niryo_pose_object2pose_object</span><span class="p">(</span><span class="n">pose</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController.get_target_pose_from_rel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),
calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the
given coordinate an object that has the given orientation. For this method to work, it is important that
only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot
this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>u_rel</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>horizontal coordinate in image of workspace, normalized between 0 and 1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>v_rel</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>vertical coordinate in image of workspace, normalized between 0 and 1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>yaw</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>orientation of an object at the pixel coordinates [u_rel, v_rel].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>pose_object</code></td>            <td>
                  <code>&#39;PoseObjectPNP&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pose of the point in world coordinates of the robot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/niryo_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_target_pose_from_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">yaw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),</span>
<span class="sd">    calculate the corresponding pose in world coordinates. The parameter yaw is useful, if we want to pick at the</span>
<span class="sd">    given coordinate an object that has the given orientation. For this method to work, it is important that</span>
<span class="sd">    only the workspace of the robot is visible in the image and nothing else. At least for the Niryo robot</span>
<span class="sd">    this is important. This means, (u_rel, v_rel) = (0, 0), is the upper left corner of the workspace.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: id of the workspace</span>
<span class="sd">        u_rel: horizontal coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">        v_rel: vertical coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">        yaw: orientation of an object at the pixel coordinates [u_rel, v_rel].</span>

<span class="sd">    Returns:</span>
<span class="sd">        pose_object: Pose of the point in world coordinates of the robot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">u_rel</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">v_rel</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">yaw</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Use the asyncio lock for thread-safe access</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> acquired lock&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">x_rel</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">u_rel</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
            <span class="n">y_rel</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">v_rel</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                <span class="n">obj_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">vision</span><span class="o">.</span><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">x_rel</span><span class="p">,</span> <span class="n">y_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">x_rel</span><span class="p">,</span> <span class="n">y_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span>

            <span class="n">obj_coords</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_niryo_pose_object2pose_object</span><span class="p">(</span><span class="n">obj_coords</span><span class="p">)</span>

        <span class="k">except</span> <span class="p">(</span><span class="n">NiryoRobotException</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">SyntaxError</span><span class="p">,</span> <span class="n">TcpCommandException</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">obj_coords</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> releasing lock&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thread </span><span class="si">{</span><span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> exiting: </span><span class="si">{</span><span class="n">obj_coords</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">obj_coords</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController.move2observation_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>The robot moves to a pose where it can observe the workspace given by workspace_id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/niryo_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">move2observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The robot moves to a pose where it can observe the workspace given by workspace_id.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: id of the workspace</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">observation_pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">observation_pose</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;observation_pose is None for workspace: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># Only convert if we have a valid pose</span>
    <span class="n">observation_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_pose_object2niryo_pose_object</span><span class="p">(</span><span class="n">observation_pose</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_move_pose</span><span class="p">(</span><span class="n">observation_pose</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">UnicodeDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;move2observation_pose error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">, pose: </span><span class="si">{</span><span class="n">observation_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;move_pose finished, current: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_pose</span><span class="p">()</span><span class="si">}</span><span class="s2">, target: </span><span class="si">{</span><span class="n">observation_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController.reset_connection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset_connection</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Reset the connection to the robot by safely disconnecting and reconnecting.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/niryo_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reset the connection to the robot by safely disconnecting and reconnecting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Resetting the robot connection...&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Attempt to close the connection safely</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_shutdown</span><span class="p">()</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error while closing connection: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Reinitialize the connection</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_create_robot</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Connection successfully reset.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to reconnect to the robot: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController.robot_pick_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_pick_object</span><span class="p">(</span><span class="n">pick_pose</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Calls the pick command of the self._robot_ctrl to pick the object at the given pose.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pick_pose</code>
            </td>
            <td>
                  <code>&#39;PoseObjectPNP&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pose where to pick the object (z-offset already applied if needed)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if pick was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/niryo_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">robot_pick_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pick_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls the pick command of the self._robot_ctrl to pick the object at the given pose.</span>

<span class="sd">    Args:</span>
<span class="sd">        pick_pose: Pose where to pick the object (z-offset already applied if needed)</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if pick was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Convert to Niryo format</span>
    <span class="n">pick_pose_niryo</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_pose_object2niryo_pose_object</span><span class="p">(</span><span class="n">pick_pose</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">pick_place</span><span class="o">.</span><span class="n">pick_from_pose</span><span class="p">(</span><span class="n">pick_pose_niryo</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">pick_from_pose</span><span class="p">(</span><span class="n">pick_pose_niryo</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Finished pick_from_pose&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># TODO: in newest version available</span>
        <span class="c1"># return not self._robot_ctrl.collision_detected</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pick failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController.robot_place_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_place_object</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Places an already picked object at the given place_pose.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>place_pose</code>
            </td>
            <td>
                  <code>&#39;PoseObjectPNP&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pose where to place the already picked object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if place was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/niryo_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">robot_place_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">place_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Places an already picked object at the given place_pose.</span>

<span class="sd">    Args:</span>
<span class="sd">        place_pose: Pose where to place the already picked object</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if place was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">place_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_pose_object2niryo_pose_object</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span>
    <span class="n">place_pose</span> <span class="o">=</span> <span class="n">place_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="mf">0.005</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Place pose: </span><span class="si">{</span><span class="n">place_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">pick_place</span><span class="o">.</span><span class="n">place_from_pose</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">place_from_pose</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># TODO: in newest version available</span>
        <span class="c1"># return not self._robot_ctrl.collision_detected</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Place failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.niryo_robot_controller.NiryoRobotController.robot_push_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_push_object</span><span class="p">(</span><span class="n">push_pose</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Push given object (its Pose) into the given direction by the given distance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>push_pose</code>
            </td>
            <td>
                  <code>&#39;PoseObjectPNP&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the Pose of the object that should be pushed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>direction</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>"up", "down", "left", "right"</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>distance</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>distance in millimeters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if push was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/niryo_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">robot_push_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">push_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Push given object (its Pose) into the given direction by the given distance.</span>

<span class="sd">    Args:</span>
<span class="sd">        push_pose: the Pose of the object that should be pushed.</span>
<span class="sd">        direction: &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, &quot;right&quot;</span>
<span class="sd">        distance: distance in millimeters</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if push was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">push_pose</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="o">.</span><span class="n">convert_pose_object2niryo_pose_object</span><span class="p">(</span><span class="n">push_pose</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Push pose: </span><span class="si">{</span><span class="n">push_pose</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pyniryo_v</span> <span class="o">==</span> <span class="s2">&quot;pyniryo2&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">tool</span><span class="o">.</span><span class="n">close_gripper</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">close_gripper</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_move_pose</span><span class="p">(</span><span class="n">push_pose</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;up&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_shift_pose</span><span class="p">(</span><span class="n">RobotAxis</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;down&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_shift_pose</span><span class="p">(</span><span class="n">RobotAxis</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="o">-</span><span class="n">distance</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_shift_pose</span><span class="p">(</span><span class="n">RobotAxis</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_shift_pose</span><span class="p">(</span><span class="n">RobotAxis</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="o">-</span><span class="n">distance</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown direction: </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># TODO: in newest version available</span>
        <span class="c1"># return not self._robot_ctrl.collision_detected</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Push failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_in_motion</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="widowxrobotcontroller">WidowXRobotController</h3>


<div class="doc doc-object doc-class">



<h2 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController" class="doc doc-heading">
            <code>robot_environment.robot.widowx_robot_controller.WidowXRobotController</code>


</h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="robot_environment.robot.robot_controller.RobotController" href="#robot_environment.robot.robot_controller.RobotController">RobotController</a></code></p>



        <p>Class for the pick-and-place WidowX robot that provides the primitive tasks of the robot like
pick and place operations using the InterbotixManipulatorXS interface.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>robot_environment/robot/widowx_robot_controller.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">WidowXRobotController</span><span class="p">(</span><span class="n">RobotController</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for the pick-and-place WidowX robot that provides the primitive tasks of the robot like</span>
<span class="sd">    pick and place operations using the InterbotixManipulatorXS interface.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Default pose used when the actual robot pose cannot be determined</span>
    <span class="c1"># Typically corresponds to the home position</span>
    <span class="n">DEFAULT_HOME_POSE</span> <span class="o">=</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

    <span class="c1"># *** CONSTRUCTORS ***</span>
    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">:</span> <span class="s2">&quot;Robot&quot;</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the robot (connects to it and sets up the interface).</span>

<span class="sd">        Args:</span>
<span class="sd">            robot: object of the Robot class.</span>
<span class="sd">            use_simulation: True, if working with a simulation model of the robot,</span>
<span class="sd">                else False if we work with a real robot.</span>
<span class="sd">            verbose: enable verbose output</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">INTERBOTIX_AVAILABLE</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;interbotix_xs_modules is required for WidowX controller&quot;</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>

    <span class="c1"># Deleting (Calling destructor)</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__del__</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_robot_ctrl&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shutting down WidowX robot controller...&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_shutdown</span><span class="p">()</span>

    <span class="c1"># *** PUBLIC GET methods ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current pose of gripper of robot.</span>

<span class="sd">        Returns:</span>
<span class="sd">            current pose of gripper of robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># InterbotixManipulatorXS stores current pose internally</span>
                <span class="c1"># This is a simplified version - in practice you&#39;d use the arm&#39;s FK</span>
                <span class="c1"># or track the last commanded pose</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_last_pose&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_pose</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_pose</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Return default home pose as fallback</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_HOME_POSE</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error getting pose: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_HOME_POSE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_camera_intrinsics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get camera intrinsics for the WidowX camera (if available).</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: (camera_matrix, distortion_coefficients)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># WidowX typically uses external camera (e.g., RealSense)</span>
        <span class="c1"># These are placeholder values - should be calibrated for your setup</span>

        <span class="c1"># Default camera matrix for Intel RealSense D435 (640x480)</span>
        <span class="n">mtx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">615.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">320.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">615.0</span><span class="p">,</span> <span class="mf">240.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]])</span>

        <span class="c1"># Distortion coefficients (k1, k2, p1, p2, k3)</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">mtx</span><span class="p">,</span> <span class="n">dist</span>

    <span class="c1"># *** PUBLIC methods ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calibrate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calibrates the WidowX robot.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if calibration was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: implement calibration</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the connection to the robot by safely disconnecting and reconnecting.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Resetting WidowX connection...&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_shutdown</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error while closing connection: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Reinitialize the connection</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_create_robot</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Connection successfully reset.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to reconnect to the robot: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">robot_pick_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pick_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls the pick command to pick an object at the given pose.</span>

<span class="sd">        Args:</span>
<span class="sd">            pick_pose: Pose where to pick the object (z-offset already applied if needed)</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if pick was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Add small z-offset for approach (additional to any z-offset already in pick_pose)</span>
            <span class="n">pick_pose_approach</span> <span class="o">=</span> <span class="n">pick_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
            <span class="n">pick_pose_grasp</span> <span class="o">=</span> <span class="n">pick_pose</span>  <span class="c1"># Use the pose as-is (z-offset already applied)</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="c1"># Open gripper</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">gripper</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

                <span class="c1"># Move to approach pose (above object)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">pick_pose_approach</span><span class="p">)</span>

                <span class="c1"># Move down to grasp pose</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">pick_pose_grasp</span><span class="p">)</span>

                <span class="c1"># Close gripper to grasp</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">gripper</span><span class="o">.</span><span class="n">grasp</span><span class="p">()</span>

                <span class="c1"># Lift object</span>
                <span class="n">lift_pose</span> <span class="o">=</span> <span class="n">pick_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">lift_pose</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pick operation completed successfully&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during pick operation: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">robot_place_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">place_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Places an already picked object at the given place_pose.</span>

<span class="sd">        Args:</span>
<span class="sd">            place_pose: Pose where to place the already picked object</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if place was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Add z-offset for approach</span>
            <span class="n">place_pose_approach</span> <span class="o">=</span> <span class="n">place_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
            <span class="n">place_pose_final</span> <span class="o">=</span> <span class="n">place_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="mf">0.005</span><span class="p">)</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="c1"># Move to approach pose</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">place_pose_approach</span><span class="p">)</span>

                <span class="c1"># Move down to place pose</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">place_pose_final</span><span class="p">)</span>

                <span class="c1"># Release gripper</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">gripper</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

                <span class="c1"># Retract</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">place_pose_approach</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Place operation completed successfully&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during place operation: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">robot_push_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">push_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Push given object (its Pose) into the given direction by the given distance.</span>

<span class="sd">        Args:</span>
<span class="sd">            push_pose: the Pose of the object that should be pushed.</span>
<span class="sd">            direction: &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, &quot;right&quot;</span>
<span class="sd">            distance: distance in millimeters</span>

<span class="sd">        Returns:</span>
<span class="sd">            True, if push was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="c1"># Close gripper first</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">gripper</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

                <span class="c1"># Move to push starting position</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">push_pose</span><span class="p">)</span>

                <span class="c1"># Calculate push distance in meters</span>
                <span class="n">push_dist_m</span> <span class="o">=</span> <span class="n">distance</span> <span class="o">/</span> <span class="mf">1000.0</span>

                <span class="c1"># Perform push based on direction</span>
                <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;up&quot;</span><span class="p">:</span>
                    <span class="c1"># Push along positive X axis</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">set_ee_cartesian_trajectory</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">push_dist_m</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;down&quot;</span><span class="p">:</span>
                    <span class="c1"># Push along negative X axis</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">set_ee_cartesian_trajectory</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="n">push_dist_m</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
                    <span class="c1"># Push along positive Y axis</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">set_ee_cartesian_trajectory</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">push_dist_m</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
                    <span class="c1"># Push along negative Y axis</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">set_ee_cartesian_trajectory</span><span class="p">(</span><span class="n">y</span><span class="o">=-</span><span class="n">push_dist_m</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown direction: </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Push operation completed: </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">distance</span><span class="si">}</span><span class="s2">mm&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during push operation: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_target_pose_from_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">yaw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),</span>
<span class="sd">        calculate the corresponding pose in world coordinates.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: id of the workspace</span>
<span class="sd">            u_rel: horizontal coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">            v_rel: vertical coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">            yaw: orientation of an object at the pixel coordinates [u_rel, v_rel].</span>

<span class="sd">        Returns:</span>
<span class="sd">            pose_object: Pose of the point in world coordinates of the robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Clamp coordinates to [0, 1]</span>
                <span class="n">u_rel</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">u_rel</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
                <span class="n">v_rel</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">v_rel</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>

                <span class="c1"># Get workspace from environment</span>
                <span class="n">workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Workspace </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

                <span class="c1"># Use workspace transformation</span>
                <span class="n">pose</span> <span class="o">=</span> <span class="n">workspace</span><span class="o">.</span><span class="n">transform_camera2world_coords</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">pose</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in get_target_pose_from_rel: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">move2observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The robot moves to a pose where it can observe the workspace given by workspace_id.</span>

<span class="sd">        Args:</span>
<span class="sd">            workspace_id: id of the workspace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">observation_pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">observation_pose</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No observation pose defined for workspace: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">observation_pose</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Moved to observation pose for workspace: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error moving to observation pose: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># *** PRIVATE methods ***</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Closes connection to InterbotixManipulatorXS.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Move to sleep pose before shutdown</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">go_to_sleep_pose</span><span class="p">()</span>
                <span class="c1"># Shutdown the robot interface</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during shutdown: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_move_to_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move gripper of robot to given pose using set_ee_pose_components.</span>

<span class="sd">        Args:</span>
<span class="sd">            pose: pose of gripper (PoseObjectPNP)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Use set_ee_pose_components method</span>
            <span class="c1"># Note: InterbotixManipulatorXS uses roll, pitch for orientation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">set_ee_pose_components</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">pose</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">pose</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">pose</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="n">roll</span><span class="o">=</span><span class="n">pose</span><span class="o">.</span><span class="n">roll</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="n">pose</span><span class="o">.</span><span class="n">pitch</span><span class="p">)</span>

            <span class="c1"># Store last commanded pose</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_last_pose</span> <span class="o">=</span> <span class="n">pose</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error moving to pose: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_create_robot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the InterbotixManipulatorXS object and initializes the robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="c1"># Create robot interface</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span> <span class="o">=</span> <span class="n">InterbotixManipulatorXS</span><span class="p">(</span>
                <span class="n">robot_model</span><span class="o">=</span><span class="s2">&quot;wx250s&quot;</span><span class="p">,</span>
                <span class="n">group_name</span><span class="o">=</span><span class="s2">&quot;arm&quot;</span><span class="p">,</span>
                <span class="n">gripper_name</span><span class="o">=</span><span class="s2">&quot;gripper&quot;</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Move to home pose on initialization</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">go_to_home_pose</span><span class="p">()</span>

            <span class="c1"># Initialize last pose</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_last_pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_HOME_POSE</span>

    <span class="nd">@log_start_end_cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_init_robot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the InterbotixManipulatorXS object and connects to it.</span>

<span class="sd">        Args:</span>
<span class="sd">            use_simulation: Currently not used for WidowX (uses ROS parameter)</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if initialization was successful, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_create_robot</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WidowX robot initialized successfully&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to initialize WidowX robot: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># *** PUBLIC properties ***</span>

    <span class="c1"># *** PRIVATE variables ***</span>

    <span class="c1"># Last commanded pose (for tracking)</span>
    <span class="n">_last_pose</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">








<h3 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController-functions">Functions</h3>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initializes the robot (connects to it and sets up the interface).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>robot</code>
            </td>
            <td>
                  <code>&#39;Robot&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>object of the Robot class.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>use_simulation</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if working with a simulation model of the robot,
else False if we work with a real robot.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>enable verbose output</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/widowx_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">:</span> <span class="s2">&quot;Robot&quot;</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the robot (connects to it and sets up the interface).</span>

<span class="sd">    Args:</span>
<span class="sd">        robot: object of the Robot class.</span>
<span class="sd">        use_simulation: True, if working with a simulation model of the robot,</span>
<span class="sd">            else False if we work with a real robot.</span>
<span class="sd">        verbose: enable verbose output</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">INTERBOTIX_AVAILABLE</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;interbotix_xs_modules is required for WidowX controller&quot;</span><span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">use_simulation</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController.calibrate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calibrate</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Calibrates the WidowX robot.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if calibration was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/widowx_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calibrate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calibrates the WidowX robot.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if calibration was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: implement calibration</span>

    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController.get_camera_intrinsics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_camera_intrinsics</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get camera intrinsics for the WidowX camera (if available).</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>tuple</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(camera_matrix, distortion_coefficients)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/widowx_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_camera_intrinsics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get camera intrinsics for the WidowX camera (if available).</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: (camera_matrix, distortion_coefficients)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># WidowX typically uses external camera (e.g., RealSense)</span>
    <span class="c1"># These are placeholder values - should be calibrated for your setup</span>

    <span class="c1"># Default camera matrix for Intel RealSense D435 (640x480)</span>
    <span class="n">mtx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">615.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">320.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">615.0</span><span class="p">,</span> <span class="mf">240.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]])</span>

    <span class="c1"># Distortion coefficients (k1, k2, p1, p2, k3)</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">mtx</span><span class="p">,</span> <span class="n">dist</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController.get_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pose</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get current pose of gripper of robot.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="robot_workspace.PoseObjectPNP">PoseObjectPNP</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>current pose of gripper of robot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/widowx_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PoseObjectPNP</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get current pose of gripper of robot.</span>

<span class="sd">    Returns:</span>
<span class="sd">        current pose of gripper of robot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># InterbotixManipulatorXS stores current pose internally</span>
            <span class="c1"># This is a simplified version - in practice you&#39;d use the arm&#39;s FK</span>
            <span class="c1"># or track the last commanded pose</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_last_pose&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_pose</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_pose</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Return default home pose as fallback</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_HOME_POSE</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error getting pose: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_HOME_POSE</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController.get_target_pose_from_rel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_target_pose_from_rel</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),
calculate the corresponding pose in world coordinates.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>u_rel</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>horizontal coordinate in image of workspace, normalized between 0 and 1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>v_rel</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>vertical coordinate in image of workspace, normalized between 0 and 1</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>yaw</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>orientation of an object at the pixel coordinates [u_rel, v_rel].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>pose_object</code></td>            <td>
                  <code>&#39;PoseObjectPNP&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pose of the point in world coordinates of the robot.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/widowx_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_target_pose_from_rel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">yaw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given relative image coordinates [u_rel, v_rel] and optionally an orientation of the point (yaw),</span>
<span class="sd">    calculate the corresponding pose in world coordinates.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: id of the workspace</span>
<span class="sd">        u_rel: horizontal coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">        v_rel: vertical coordinate in image of workspace, normalized between 0 and 1</span>
<span class="sd">        yaw: orientation of an object at the pixel coordinates [u_rel, v_rel].</span>

<span class="sd">    Returns:</span>
<span class="sd">        pose_object: Pose of the point in world coordinates of the robot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Clamp coordinates to [0, 1]</span>
            <span class="n">u_rel</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">u_rel</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
            <span class="n">v_rel</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">v_rel</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>

            <span class="c1"># Get workspace from environment</span>
            <span class="n">workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_workspace_by_id</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Workspace </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

            <span class="c1"># Use workspace transformation</span>
            <span class="n">pose</span> <span class="o">=</span> <span class="n">workspace</span><span class="o">.</span><span class="n">transform_camera2world_coords</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">,</span> <span class="n">u_rel</span><span class="p">,</span> <span class="n">v_rel</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">pose</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in get_target_pose_from_rel: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">PoseObjectPNP</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController.move2observation_pose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">move2observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>The robot moves to a pose where it can observe the workspace given by workspace_id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workspace_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the workspace</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/widowx_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">move2observation_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The robot moves to a pose where it can observe the workspace given by workspace_id.</span>

<span class="sd">    Args:</span>
<span class="sd">        workspace_id: id of the workspace</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">observation_pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span><span class="o">.</span><span class="n">get_observation_pose</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">observation_pose</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No observation pose defined for workspace: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">observation_pose</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Moved to observation pose for workspace: </span><span class="si">{</span><span class="n">workspace_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error moving to observation pose: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController.reset_connection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset_connection</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Reset the connection to the robot by safely disconnecting and reconnecting.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/widowx_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reset the connection to the robot by safely disconnecting and reconnecting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Resetting WidowX connection...&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_shutdown</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error while closing connection: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Reinitialize the connection</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_create_robot</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Connection successfully reset.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to reconnect to the robot: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController.robot_pick_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_pick_object</span><span class="p">(</span><span class="n">pick_pose</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Calls the pick command to pick an object at the given pose.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pick_pose</code>
            </td>
            <td>
                  <code>&#39;PoseObjectPNP&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pose where to pick the object (z-offset already applied if needed)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if pick was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/widowx_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">robot_pick_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pick_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls the pick command to pick an object at the given pose.</span>

<span class="sd">    Args:</span>
<span class="sd">        pick_pose: Pose where to pick the object (z-offset already applied if needed)</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if pick was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Add small z-offset for approach (additional to any z-offset already in pick_pose)</span>
        <span class="n">pick_pose_approach</span> <span class="o">=</span> <span class="n">pick_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
        <span class="n">pick_pose_grasp</span> <span class="o">=</span> <span class="n">pick_pose</span>  <span class="c1"># Use the pose as-is (z-offset already applied)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="c1"># Open gripper</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">gripper</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

            <span class="c1"># Move to approach pose (above object)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">pick_pose_approach</span><span class="p">)</span>

            <span class="c1"># Move down to grasp pose</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">pick_pose_grasp</span><span class="p">)</span>

            <span class="c1"># Close gripper to grasp</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">gripper</span><span class="o">.</span><span class="n">grasp</span><span class="p">()</span>

            <span class="c1"># Lift object</span>
            <span class="n">lift_pose</span> <span class="o">=</span> <span class="n">pick_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">lift_pose</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pick operation completed successfully&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during pick operation: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController.robot_place_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_place_object</span><span class="p">(</span><span class="n">place_pose</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Places an already picked object at the given place_pose.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>place_pose</code>
            </td>
            <td>
                  <code>&#39;PoseObjectPNP&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pose where to place the already picked object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if place was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/widowx_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">robot_place_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">place_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Places an already picked object at the given place_pose.</span>

<span class="sd">    Args:</span>
<span class="sd">        place_pose: Pose where to place the already picked object</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if place was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Add z-offset for approach</span>
        <span class="n">place_pose_approach</span> <span class="o">=</span> <span class="n">place_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
        <span class="n">place_pose_final</span> <span class="o">=</span> <span class="n">place_pose</span><span class="o">.</span><span class="n">copy_with_offsets</span><span class="p">(</span><span class="n">z_offset</span><span class="o">=</span><span class="mf">0.005</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="c1"># Move to approach pose</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">place_pose_approach</span><span class="p">)</span>

            <span class="c1"># Move down to place pose</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">place_pose_final</span><span class="p">)</span>

            <span class="c1"># Release gripper</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">gripper</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

            <span class="c1"># Retract</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">place_pose_approach</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Place operation completed successfully&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during place operation: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="robot_environment.robot.widowx_robot_controller.WidowXRobotController.robot_push_object" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">robot_push_object</span><span class="p">(</span><span class="n">push_pose</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Push given object (its Pose) into the given direction by the given distance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>push_pose</code>
            </td>
            <td>
                  <code>&#39;PoseObjectPNP&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the Pose of the object that should be pushed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>direction</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>"up", "down", "left", "right"</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>distance</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>distance in millimeters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True, if push was successful, else False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>robot_environment/robot/widowx_robot_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end_cls</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">robot_push_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">push_pose</span><span class="p">:</span> <span class="s2">&quot;PoseObjectPNP&quot;</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Push given object (its Pose) into the given direction by the given distance.</span>

<span class="sd">    Args:</span>
<span class="sd">        push_pose: the Pose of the object that should be pushed.</span>
<span class="sd">        direction: &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, &quot;right&quot;</span>
<span class="sd">        distance: distance in millimeters</span>

<span class="sd">    Returns:</span>
<span class="sd">        True, if push was successful, else False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="c1"># Close gripper first</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">gripper</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

            <span class="c1"># Move to push starting position</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_move_to_pose</span><span class="p">(</span><span class="n">push_pose</span><span class="p">)</span>

            <span class="c1"># Calculate push distance in meters</span>
            <span class="n">push_dist_m</span> <span class="o">=</span> <span class="n">distance</span> <span class="o">/</span> <span class="mf">1000.0</span>

            <span class="c1"># Perform push based on direction</span>
            <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;up&quot;</span><span class="p">:</span>
                <span class="c1"># Push along positive X axis</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">set_ee_cartesian_trajectory</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">push_dist_m</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;down&quot;</span><span class="p">:</span>
                <span class="c1"># Push along negative X axis</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">set_ee_cartesian_trajectory</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="n">push_dist_m</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
                <span class="c1"># Push along positive Y axis</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">set_ee_cartesian_trajectory</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">push_dist_m</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
                <span class="c1"># Push along negative Y axis</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_robot_ctrl</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">set_ee_cartesian_trajectory</span><span class="p">(</span><span class="n">y</span><span class="o">=-</span><span class="n">push_dist_m</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown direction: </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Push operation completed: </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">distance</span><span class="si">}</span><span class="s2">mm&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during push operation: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>